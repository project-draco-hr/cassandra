{
  final int left=buffer.capacity() - buffer.position();
  if (current < bufferOffset || left < length)   reBuffer();
  length=Math.min(length,buffer.capacity() - buffer.position());
  buffer.put(buff,offset,length);
  current+=length;
  if (current > bufferEnd)   bufferEnd=current;
  return length;
}
