{
  final int left=(int)maxBufferSize - buffer.position();
  if (current < bufferOffset || left < length) {
    reBuffer();
  }
  length=Math.min(length,(int)(maxBufferSize - buffer.position()));
  buffer.put(buff,offset,length);
  current+=length;
  if (current > bufferEnd)   bufferEnd=current;
  return length;
}
