{
  flush();
  bufferOffset=current;
  if (bufferOffset >= channel.size()) {
    validBufferBytes=0;
    return;
  }
  if (bufferOffset < minBufferOffset)   minBufferOffset=bufferOffset;
  channel.position(bufferOffset);
  int read=0;
  while (read < buffer.length) {
    int n=super.read(buffer,read,buffer.length - read);
    if (n < 0)     break;
    read+=n;
  }
  validBufferBytes=read;
  bytesSinceCacheFlush+=read;
  if (skipCache && bytesSinceCacheFlush >= MAX_BYTES_IN_PAGE_CACHE) {
    CLibrary.trySkipCache(this.fd,minBufferOffset,0);
    bytesSinceCacheFlush=0;
    minBufferOffset=Long.MAX_VALUE;
  }
}
