{
  if (buffer == null)   throw new ClosedChannelException();
  if (isReadOnly())   throw new IOException("Unable to write: file is in the read-only mode.");
  while (length > 0) {
    int n=writeAtMost(buff,offset,length);
    offset+=n;
    length-=n;
    isDirty=true;
    syncNeeded=true;
  }
}
