{
  while (length > 0) {
    int n=writeAtMost(buff,offset,length);
    offset+=n;
    length-=n;
    isDirty=true;
    syncNeeded=true;
  }
}
