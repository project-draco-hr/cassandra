{
  List<SSTableReader> sstables;
  DataTracker.View view;
  while (true) {
    view=data.getView();
    if (view.intervalTree.isEmpty()) {
      sstables=Collections.emptyList();
      break;
    }
    sstables=filter.apply(view);
    if (SSTableReader.acquireReferences(sstables))     break;
  }
  return new ViewFragment(sstables,view.getAllMemtables());
}
