{
  try {
    forceBlockingFlush();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  try {
    Thread.sleep(100);
  }
 catch (  InterruptedException e) {
    throw new AssertionError(e);
  }
  long truncatedAt=System.currentTimeMillis();
  snapshot(Table.getTimestampedSnapshotName("before-truncate"));
  return CompactionManager.instance.submitTruncate(this,truncatedAt);
}
