{
  ReplayPosition lastReplayPosition;
  while (true) {
    lastReplayPosition=new Memtable.LastReplayPosition(CommitLog.instance.getContext());
    ReplayPosition currentLast=commitLogUpperBound.get();
    if ((currentLast == null || currentLast.compareTo(lastReplayPosition) <= 0) && commitLogUpperBound.compareAndSet(currentLast,lastReplayPosition))     break;
  }
}
