{
  if (ssTables.getRowCache().getCapacity() > 0) {
    int newCapacity=(int)(DatabaseDescriptor.getReduceCacheCapacityTo() * ssTables.getRowCache().getSize());
    logger.warn(String.format("Reducing %s row cache capacity from %d to %s to reduce memory pressure",columnFamily,ssTables.getRowCache().getCapacity(),newCapacity));
    ssTables.getRowCache().setCapacity(newCapacity);
  }
  if (ssTables.getKeyCache().getCapacity() > 0) {
    int newCapacity=(int)(DatabaseDescriptor.getReduceCacheCapacityTo() * ssTables.getKeyCache().getSize());
    logger.warn(String.format("Reducing %s key cache capacity from %d to %s to reduce memory pressure",columnFamily,ssTables.getKeyCache().getCapacity(),newCapacity));
    ssTables.getKeyCache().setCapacity(newCapacity);
  }
}
