{
synchronized (data) {
    logFlush();
    Flush flush=new Flush(false);
    flushExecutor.execute(flush);
    ListenableFutureTask<ReplayPosition> task=ListenableFutureTask.create(flush.postFlush);
    postFlushExecutor.submit(task);
    return task;
  }
}
