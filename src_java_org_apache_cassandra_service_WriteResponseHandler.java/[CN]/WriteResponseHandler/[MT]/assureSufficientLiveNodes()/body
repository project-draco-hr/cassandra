{
  if (consistencyLevel == ConsistencyLevel.ANY) {
    int effectiveEndpoints=writeEndpoints.contains(FBUtilities.getBroadcastAddress()) ? writeEndpoints.size() : writeEndpoints.size() + 1;
    if (effectiveEndpoints < responses.get())     throw new UnavailableException(consistencyLevel,responses.get(),effectiveEndpoints);
    return;
  }
  int liveNodes=0;
  for (  InetAddress destination : writeEndpoints) {
    if (FailureDetector.instance.isAlive(destination))     liveNodes++;
  }
  if (liveNodes < responses.get()) {
    throw new UnavailableException(consistencyLevel,responses.get(),liveNodes);
  }
}
