{
  Map.Entry<CommitLogPosition,CommitLogPosition> extend=ranges.floorEntry(end);
  if (extend != null && extend.getValue().compareTo(end) > 0)   end=extend.getValue();
  extend=ranges.lowerEntry(start);
  if (extend != null && extend.getValue().compareTo(start) >= 0)   start=extend.getKey();
  ranges.subMap(start,end).clear();
  ranges.put(start,end);
}
