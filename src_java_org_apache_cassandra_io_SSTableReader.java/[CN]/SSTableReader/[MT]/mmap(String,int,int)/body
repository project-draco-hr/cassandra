{
  RandomAccessFile raf;
  try {
    raf=new RandomAccessFile(filename,"r");
  }
 catch (  FileNotFoundException e) {
    throw new IOError(e);
  }
  if (size < 0) {
    if (raf.length() > Integer.MAX_VALUE)     throw new UnsupportedOperationException("File " + filename + " is too large to map in its entirety");
    size=(int)raf.length();
  }
  try {
    return raf.getChannel().map(FileChannel.MapMode.READ_ONLY,start,size);
  }
  finally {
    raf.close();
  }
}
