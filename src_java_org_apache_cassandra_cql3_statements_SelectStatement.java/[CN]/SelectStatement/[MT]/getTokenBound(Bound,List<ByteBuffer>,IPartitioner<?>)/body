{
  assert onToken;
  Restriction keyRestriction=keyRestrictions[0];
  Term t=keyRestriction.isEquality() ? keyRestriction.eqValues.get(0) : keyRestriction.bound(b);
  if (t == null)   return p.getMinimumToken();
  ByteBuffer value=t.bindAndGet(variables);
  if (value == null)   throw new InvalidRequestException("Invalid null token value");
  return p.getTokenFactory().fromByteArray(value);
}
