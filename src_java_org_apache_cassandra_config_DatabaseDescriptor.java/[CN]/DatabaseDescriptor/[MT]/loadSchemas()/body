{
  UUID uuid=Migration.getLastMigrationId();
  if (uuid == null)   logger.warn("Couldn't detect any schema definitions in local storage. I hope you've got a plan.");
 else {
    logger.info("Loading schema version " + uuid.toString());
    Collection<KSMetaData> tableDefs=DefsTable.loadFromStorage(uuid);
    for (    KSMetaData def : tableDefs) {
      DatabaseDescriptor.setTableDefinition(def,uuid);
      Table.open(def.name);
    }
    if (conf.keyspaces.size() > 0)     logger.warn("Schema definitions were defined both locally and in " + STORAGE_CONF_FILE + ". Definitions in "+ STORAGE_CONF_FILE+ " were ignored.");
  }
  CFMetaData.fixMaxId();
}
