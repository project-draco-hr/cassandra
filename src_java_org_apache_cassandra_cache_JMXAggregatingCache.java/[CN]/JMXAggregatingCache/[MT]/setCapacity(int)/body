{
  long totalObjects=0;
  for (  IAggregatableCacheProvider cacheProvider : cacheProviders) {
    totalObjects+=cacheProvider.getObjectCount();
  }
  for (  IAggregatableCacheProvider cacheProvider : cacheProviders) {
    double ratio=((double)cacheProvider.getObjectCount()) / totalObjects;
    cacheProvider.getCache().setCapacity((int)(capacity * ratio));
  }
}
