{
  double ratio=capacity / getCapacity();
  for (  InstrumentedCache cache : caches) {
    cache.setCapacity(Math.max(1,(int)(cache.getCapacity() * ratio)));
  }
}
