{
  try {
    session=new Session(arguments);
  }
 catch (  IllegalArgumentException e) {
    printHelpMessage();
    return;
  }
  PrintStream outStream=session.getOutputStream();
  if (session.sendToDaemon != null) {
    Socket socket=new Socket(session.sendToDaemon,2159);
    ObjectOutputStream out=new ObjectOutputStream(socket.getOutputStream());
    BufferedReader inp=new BufferedReader(new InputStreamReader(socket.getInputStream()));
    Runtime.getRuntime().addShutdownHook(new ShutDown(socket,out));
    out.writeObject(session);
    String line;
    try {
      while (!socket.isClosed() && (line=inp.readLine()) != null) {
        if (line.equals("END") || line.equals("FAILURE")) {
          out.writeInt(1);
          break;
        }
        outStream.println(line);
      }
    }
 catch (    SocketException e) {
      if (!stopped)       e.printStackTrace();
    }
    out.close();
    inp.close();
    socket.close();
  }
 else {
    StressAction stressAction=new StressAction(session,outStream);
    stressAction.start();
    stressAction.join();
    System.exit(stressAction.getReturnCode());
  }
}
