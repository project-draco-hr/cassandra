{
  buffer.waitForModifications();
  try {
    flush(buffer);
  }
  finally {
    HintsBuffer recycledBuffer=buffer.recycle();
    if (!bufferPool.offer(recycledBuffer))     recycledBuffer.free();
  }
}
