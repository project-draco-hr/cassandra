{
  V previous=null;
  Object oldKey;
  int index=insertionIndex(key);
  boolean isNewMapping=true;
  if (index < 0) {
    index=-index - 1;
    previous=values_[index];
    isNewMapping=false;
  }
  oldKey=set_[index];
  if (oldKey == FREE) {
    addEntry(key,index);
  }
  set_[index]=key;
  values_[index]=value;
  if (isNewMapping) {
    postInsertHook(oldKey == FREE);
  }
  return previous;
}
