{
  SocketChannel socketChannel=stream_.getStream();
  InetSocketAddress remoteAddress=(InetSocketAddress)socketChannel.socket().getRemoteSocketAddress();
  String remoteHostIp=remoteAddress.getAddress().getHostAddress();
  createFileChannel();
  if (streamContext_ != null) {
    try {
      bytesRead_+=fc_.transferFrom(socketChannel,bytesRead_,ContentStreamState.count_);
      if (bytesRead_ != streamContext_.getExpectedBytes())       throw new ReadNotCompleteException("Specified number of bytes have not been read from the Socket Channel");
    }
 catch (    IOException ex) {
      streamStatus_.setAction(StreamContextManager.StreamCompletionAction.STREAM);
      handleStreamCompletion(remoteHostIp);
      File file=new File(streamContext_.getTargetFile());
      file.delete();
      throw ex;
    }
    if (bytesRead_ == streamContext_.getExpectedBytes()) {
      if (logger_.isDebugEnabled())       logger_.debug("Removing stream context " + streamContext_);
      handleStreamCompletion(remoteHostIp);
      bytesRead_=0L;
      fc_.close();
      morphState();
    }
  }
  return new byte[0];
}
