{
  if (this == pos)   return 0;
  if (!(pos instanceof DecoratedKey))   return -pos.compareTo(this);
  DecoratedKey otherKey=(DecoratedKey)pos;
  int cmp=token.compareTo(otherKey.getToken());
  return cmp == 0 ? ByteBufferUtil.compareUnsigned(key,otherKey.key) : cmp;
}
