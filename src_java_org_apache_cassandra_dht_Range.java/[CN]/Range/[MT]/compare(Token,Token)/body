{
  byte[] l, r;
  int lo, ll, ro, rl;
  if (left.token instanceof byte[]) {
    l=(byte[])left.token;
    lo=0;
    ll=l.length;
  }
 else   if (left.token instanceof ByteBuffer) {
    l=((ByteBuffer)left.token).array();
    lo=((ByteBuffer)left.token).position() + ((ByteBuffer)left.token).arrayOffset();
    ll=((ByteBuffer)left.token).limit();
  }
 else {
    return left.compareTo(right);
  }
  if (right.token instanceof byte[]) {
    r=(byte[])right.token;
    ro=0;
    rl=r.length;
  }
 else {
    r=((ByteBuffer)right.token).array();
    ro=((ByteBuffer)right.token).position() + ((ByteBuffer)right.token).arrayOffset();
    rl=((ByteBuffer)right.token).limit();
  }
  return FBUtilities.compareByteArrays(l,r,lo,ro,ll,rl);
}
