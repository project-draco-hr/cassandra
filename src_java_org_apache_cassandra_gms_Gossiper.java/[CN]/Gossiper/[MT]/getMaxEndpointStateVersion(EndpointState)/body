{
  List<Integer> versions=new ArrayList<Integer>();
  versions.add(epState.getHeartBeatState().getHeartBeatVersion());
  for (  VersionedValue value : epState.getApplicationStateMap().values()) {
    int stateVersion=value.version;
    versions.add(stateVersion);
  }
  Collections.sort(versions);
  int maxVersion=versions.get(versions.size() - 1);
  versions.clear();
  return maxVersion;
}
