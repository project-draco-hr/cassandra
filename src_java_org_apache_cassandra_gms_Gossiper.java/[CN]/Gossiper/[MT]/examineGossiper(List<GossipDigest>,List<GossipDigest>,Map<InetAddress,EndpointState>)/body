{
  for (  GossipDigest gDigest : gDigestList) {
    int remoteGeneration=gDigest.getGeneration();
    int maxRemoteVersion=gDigest.getMaxVersion();
    EndpointState epStatePtr=endpointStateMap.get(gDigest.getEndpoint());
    if (epStatePtr != null) {
      int localGeneration=epStatePtr.getHeartBeatState().getGeneration();
      int maxLocalVersion=getMaxEndpointStateVersion(epStatePtr);
      if (remoteGeneration == localGeneration && maxRemoteVersion == maxLocalVersion)       continue;
      if (remoteGeneration > localGeneration) {
        requestAll(gDigest,deltaGossipDigestList,remoteGeneration);
      }
 else       if (remoteGeneration < localGeneration) {
        sendAll(gDigest,deltaEpStateMap,0);
      }
 else       if (remoteGeneration == localGeneration) {
        if (maxRemoteVersion > maxLocalVersion) {
          deltaGossipDigestList.add(new GossipDigest(gDigest.getEndpoint(),remoteGeneration,maxLocalVersion));
        }
 else         if (maxRemoteVersion < maxLocalVersion) {
          sendAll(gDigest,deltaEpStateMap,maxRemoteVersion);
        }
      }
    }
 else {
      requestAll(gDigest,deltaGossipDigestList,remoteGeneration);
    }
  }
}
