{
  IFailureDetector fd=FailureDetector.instance;
  for (  Entry<InetAddress,EndPointState> entry : remoteEpStateMap.entrySet()) {
    InetAddress endpoint=entry.getKey();
    EndPointState remoteEndPointState=entry.getValue();
    EndPointState localEndPointState=endPointStateMap_.get(endpoint);
    if (localEndPointState != null) {
      int localGeneration=localEndPointState.getHeartBeatState().generation_;
      int remoteGeneration=remoteEndPointState.getHeartBeatState().generation_;
      if (remoteGeneration > localGeneration) {
        fd.report(endpoint);
        continue;
      }
      if (remoteGeneration == localGeneration) {
        int localVersion=getMaxEndPointStateVersion(localEndPointState);
        int remoteVersion=remoteEndPointState.getHeartBeatState().getHeartBeatVersion();
        if (remoteVersion > localVersion) {
          fd.report(endpoint);
        }
      }
    }
  }
}
