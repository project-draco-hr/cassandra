{
  EndpointState epState=endpointStateMap.get(endpoint);
  epState.updateTimestamp();
  epState.getHeartBeatState().forceNewerGenerationUnsafe();
  long expireTime=computeExpireTime();
  epState.addApplicationState(ApplicationState.STATUS,StorageService.instance.valueFactory.removedNonlocal(hostId,expireTime));
  logger.info("Completing removal of " + endpoint);
  addExpireTimeForEndpoint(endpoint,expireTime);
  endpointStateMap.put(endpoint,epState);
  try {
    Thread.sleep(intervalInMillis * 2);
  }
 catch (  InterruptedException e) {
    throw new AssertionError(e);
  }
}
