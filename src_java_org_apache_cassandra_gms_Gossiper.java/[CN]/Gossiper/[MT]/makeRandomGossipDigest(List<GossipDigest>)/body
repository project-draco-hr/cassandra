{
  EndpointState epState=endpointStateMap_.get(localEndpoint_);
  int generation=epState.getHeartBeatState().getGeneration();
  int maxVersion=getMaxEndpointStateVersion(epState);
  gDigests.add(new GossipDigest(localEndpoint_,generation,maxVersion));
  List<InetAddress> endpoints=new ArrayList<InetAddress>(endpointStateMap_.keySet());
  Collections.shuffle(endpoints,random_);
  for (  InetAddress endpoint : endpoints) {
    epState=endpointStateMap_.get(endpoint);
    if (epState != null) {
      generation=epState.getHeartBeatState().getGeneration();
      maxVersion=getMaxEndpointStateVersion(epState);
      gDigests.add(new GossipDigest(endpoint,generation,maxVersion));
    }
 else {
      gDigests.add(new GossipDigest(endpoint,0,0));
    }
  }
  StringBuilder sb=new StringBuilder();
  for (  GossipDigest gDigest : gDigests) {
    sb.append(gDigest);
    sb.append(" ");
  }
  if (logger_.isTraceEnabled())   logger_.trace("Gossip Digests are : " + sb.toString());
}
