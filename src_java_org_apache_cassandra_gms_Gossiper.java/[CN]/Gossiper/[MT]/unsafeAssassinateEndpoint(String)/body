{
  InetAddress endpoint=InetAddress.getByName(address);
  EndpointState epState=endpointStateMap.get(endpoint);
  Collection<Token> tokens=null;
  logger.warn("Assassinating {} via gossip",endpoint);
  if (epState == null) {
    epState=new EndpointState(new HeartBeatState((int)((System.currentTimeMillis() + 60000) / 1000),9999));
  }
 else {
    try {
      tokens=StorageService.instance.getTokenMetadata().getTokens(endpoint);
    }
 catch (    AssertionError e) {
    }
    int generation=epState.getHeartBeatState().getGeneration();
    logger.info("Sleeping for " + StorageService.RING_DELAY + "ms to ensure "+ endpoint+ " does not change");
    try {
      Thread.sleep(StorageService.RING_DELAY);
    }
 catch (    InterruptedException e) {
      throw new AssertionError(e);
    }
    epState=endpointStateMap.get(endpoint);
    if (epState.getHeartBeatState().getGeneration() != generation)     throw new RuntimeException("Endpoint " + endpoint + " generation changed while trying to remove it");
    epState.updateTimestamp();
    epState.getHeartBeatState().forceNewerGenerationUnsafe();
  }
  if (tokens == null)   tokens=Arrays.asList(StorageService.instance.getBootstrapToken());
  epState.addApplicationState(ApplicationState.STATUS,StorageService.instance.valueFactory.left(tokens,computeExpireTime()));
  handleMajorStateChange(endpoint,epState);
  try {
    Thread.sleep(intervalInMillis * 4);
  }
 catch (  InterruptedException e) {
    throw new AssertionError(e);
  }
  logger.warn("Finished killing {}",endpoint);
}
