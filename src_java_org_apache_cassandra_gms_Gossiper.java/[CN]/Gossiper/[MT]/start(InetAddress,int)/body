{
  localEndpoint_=localEndpoint;
  Set<InetAddress> seedHosts=DatabaseDescriptor.getSeeds();
  for (  InetAddress seed : seedHosts) {
    if (seed.equals(localEndpoint))     continue;
    seeds_.add(seed);
  }
  EndpointState localState=endpointStateMap_.get(localEndpoint_);
  if (localState == null) {
    HeartBeatState hbState=new HeartBeatState(generationNbr);
    localState=new EndpointState(hbState);
    localState.isAlive(true);
    localState.isAGossiper(true);
    if (!StorageService.instance.isClientMode())     localState.addApplicationState(ApplicationState.SCHEMA,StorageService.instance.valueFactory.migration(DatabaseDescriptor.getDefsVersion()));
    endpointStateMap_.put(localEndpoint_,localState);
  }
  DatabaseDescriptor.getEndpointSnitch().gossiperStarting();
  scheduledGossipTask=StorageService.scheduledTasks.scheduleWithFixedDelay(new GossipTask(),Gossiper.intervalInMillis_,Gossiper.intervalInMillis_,TimeUnit.MILLISECONDS);
}
