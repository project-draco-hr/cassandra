{
  validate(tmutations);
  if (tmutations.size() == 1) {
    Collection<PartitionUpdate> updates=Iterables.getOnlyElement(tmutations).getPartitionUpdates();
    if (updates.size() > 1)     throw new InvalidRequestException("The updates generated by triggers are not all for the same partition");
    validateSamePartition(cfId,key,Iterables.getOnlyElement(updates));
    return updates;
  }
  ArrayList<PartitionUpdate> updates=new ArrayList<>(tmutations.size());
  for (  Mutation mutation : tmutations) {
    for (    PartitionUpdate update : mutation.getPartitionUpdates()) {
      validateSamePartition(cfId,key,update);
      updates.add(update);
    }
  }
  return updates;
}
