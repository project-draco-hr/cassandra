{
  store.setMinimumCompactionThreshold(2);
  store.setMaximumCompactionThreshold(4);
  do {
    ArrayList<Future<?>> compactions=new ArrayList<Future<?>>();
    for (int i=0; i < 10; i++)     compactions.add(CompactionManager.instance.submitBackground(store));
    FBUtilities.waitOnFutures(compactions);
  }
 while (CompactionManager.instance.getPendingTasks() > 0 || CompactionManager.instance.getActiveCompactions() > 0);
  if (store.getSSTables().size() > 1) {
    CompactionManager.instance.performMaximal(store);
  }
}
