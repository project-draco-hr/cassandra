{
  queue=new ArrayBlockingQueue<CheaterFutureTask>(10000);
  Runnable runnable=new Runnable(){
    public void run(){
      try {
        if (DatabaseDescriptor.getCommitLogSync() == DatabaseDescriptor.CommitLogSync.batch) {
          while (true) {
            processWithSyncBatch();
            completedTaskCount++;
          }
        }
 else {
          while (true) {
            process();
            completedTaskCount++;
          }
        }
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
;
  new Thread(runnable,"COMMIT-LOG-WRITER").start();
  MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  try {
    mbs.registerMBean(this,new ObjectName("org.apache.cassandra.concurrent:type=COMMITLOG"));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
