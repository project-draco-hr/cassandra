{
  pendingTasks=Metrics.newGauge(factory.createMetricName("PendingTasks"),new Gauge<Integer>(){
    public Integer value(){
      int n=0;
      for (      String tableName : Schema.instance.getTables()) {
        for (        ColumnFamilyStore cfs : Table.open(tableName).getColumnFamilyStores())         n+=cfs.getCompactionStrategy().getEstimatedRemainingTasks();
      }
      for (      ThreadPoolExecutor collector : collectors)       n+=collector.getTaskCount() - collector.getCompletedTaskCount();
      return n;
    }
  }
);
  completedTasks=Metrics.newGauge(factory.createMetricName("CompletedTasks"),new Gauge<Long>(){
    public Long value(){
      long completedTasks=0;
      for (      ThreadPoolExecutor collector : collectors)       completedTasks+=collector.getCompletedTaskCount();
      return completedTasks;
    }
  }
);
  totalCompactionsCompleted=Metrics.newMeter(factory.createMetricName("TotalCompactionsCompleted"),"compaction completed",TimeUnit.SECONDS);
  bytesCompacted=Metrics.newCounter(factory.createMetricName("BytesCompacted"));
}
