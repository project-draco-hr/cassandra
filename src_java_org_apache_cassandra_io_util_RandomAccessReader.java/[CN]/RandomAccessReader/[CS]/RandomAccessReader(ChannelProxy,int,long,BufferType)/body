{
  this.channel=channel;
  if (bufferSize <= 0)   throw new IllegalArgumentException("bufferSize must be positive");
  fileLength=overrideLength <= 0 ? channel.size() : overrideLength;
  buffer=allocateBuffer(getBufferSize(bufferSize),bufferType);
  buffer.limit(0);
}
