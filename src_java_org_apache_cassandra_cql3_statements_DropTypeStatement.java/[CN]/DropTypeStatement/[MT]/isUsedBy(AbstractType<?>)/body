{
  if (toCheck instanceof UserType) {
    UserType ut=(UserType)toCheck;
    if (name.getKeyspace().equals(ut.keyspace) && name.getUserTypeName().equals(ut.name))     return true;
    for (    AbstractType<?> subtype : ut.fieldTypes())     if (isUsedBy(subtype))     return true;
  }
 else   if (toCheck instanceof CompositeType) {
    CompositeType ct=(CompositeType)toCheck;
    for (    AbstractType<?> subtype : ct.types)     if (isUsedBy(subtype))     return true;
  }
 else   if (toCheck instanceof ColumnToCollectionType) {
    for (    CollectionType collection : ((ColumnToCollectionType)toCheck).defined.values())     if (isUsedBy(collection))     return true;
  }
 else   if (toCheck instanceof CollectionType) {
    if (toCheck instanceof ListType)     return isUsedBy(((ListType)toCheck).getElementsType());
 else     if (toCheck instanceof SetType)     return isUsedBy(((SetType)toCheck).getElementsType());
 else     return isUsedBy(((MapType)toCheck).getKeysType()) || isUsedBy(((MapType)toCheck).getKeysType());
  }
  return false;
}
