{
  final ByteBuffer buf=dest.buffer;
  int len=src.remaining();
  dest.buffer.put((byte)len);
  dest.buffer.put((byte)(len >>> 8));
  dest.buffer.put((byte)(len >>> 16));
  dest.buffer.put((byte)(len >>> 24));
  int start=dest.buffer.position();
  try {
    compressor.compress(src,dest.buffer);
    return INTEGER_BYTES + (buf.position() - start);
  }
 catch (  LZ4Exception e) {
    throw new IOException(e);
  }
}
