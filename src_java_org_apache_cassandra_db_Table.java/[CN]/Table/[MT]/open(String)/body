{
  Table tableInstance=instances.get(table);
  if (tableInstance == null) {
synchronized (Table.class) {
      tableInstance=instances.get(table);
      if (tableInstance == null) {
        Collection<Runnable> systemTableUpdates=new ArrayList<Runnable>();
        for (        CFMetaData cfm : DatabaseDescriptor.getTableDefinition(table).cfMetaData().values()) {
          ColumnFamilyStore.scrubDataDirectories(table,cfm.cfName);
          systemTableUpdates.addAll(ColumnFamilyStore.deleteCompactedFiles(table,cfm.cfName));
        }
        tableInstance=new Table(table);
        instances.put(table,tableInstance);
        for (        Runnable r : systemTableUpdates)         r.run();
      }
    }
  }
  return tableInstance;
}
