{
  Map<InetAddress,List<Range>> sources=new HashMap<InetAddress,List<Range>>();
  for (  Range range : rangesWithSourceTarget.keySet()) {
    for (    InetAddress source : rangesWithSourceTarget.get(range)) {
      if (failureDetector.isAlive(source)) {
        List<Range> ranges=sources.get(source);
        if (ranges == null) {
          ranges=new ArrayList<Range>();
          sources.put(source,ranges);
        }
        ranges.add(range);
        break;
      }
    }
  }
  return sources;
}
