{
  if (components.contains(Component.FILTER)) {
    String path=descriptor.filenameFor(Component.FILTER);
    try {
      FileOutputStream fos=new FileOutputStream(path);
      DataOutputStreamAndChannel stream=new DataOutputStreamAndChannel(fos);
      FilterFactory.serialize(bf,stream);
      stream.flush();
      fos.getFD().sync();
      stream.close();
    }
 catch (    IOException e) {
      throw new FSWriteError(e,path);
    }
  }
  long position=indexFile.getFilePointer();
  indexFile.close();
  FileUtils.truncate(indexFile.getPath(),position);
}
