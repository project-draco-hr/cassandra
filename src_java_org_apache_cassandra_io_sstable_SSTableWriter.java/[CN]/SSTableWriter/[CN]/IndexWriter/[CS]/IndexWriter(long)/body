{
  indexFile=SequentialWriter.open(new File(descriptor.filenameFor(SSTable.COMPONENT_INDEX)),!DatabaseDescriptor.populateIOCacheOnFlush());
  builder=SegmentedFile.getBuilder(DatabaseDescriptor.getIndexAccessMode());
  summary=new IndexSummary(keyCount);
  Double fpChance=metadata.getBloomFilterFpChance();
  if (fpChance != null && fpChance == 0) {
    logger.error("Bloom filter FP chance of zero isn't supposed to happen");
    fpChance=null;
  }
  bf=fpChance == null ? BloomFilter.getFilter(keyCount,15) : BloomFilter.getFilter(keyCount,fpChance);
}
