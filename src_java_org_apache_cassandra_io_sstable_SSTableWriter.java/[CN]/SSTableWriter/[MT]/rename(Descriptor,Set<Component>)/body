{
  Descriptor newdesc=tmpdesc.asTemporary(false);
  try {
    for (    Component component : Sets.difference(components,Collections.singleton(Component.DATA)))     FBUtilities.renameWithConfirm(tmpdesc.filenameFor(component),newdesc.filenameFor(component));
    FBUtilities.renameWithConfirm(tmpdesc.filenameFor(Component.DATA),newdesc.filenameFor(Component.DATA));
  }
 catch (  IOException e) {
    throw new IOError(e);
  }
  return newdesc;
}
