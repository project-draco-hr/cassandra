{
  DecoratedKey key=null;
  if (version < MessagingService.VERSION_30)   key=StorageService.getPartitioner().decorateKey(ByteBufferUtil.readWithShortLength(in));
  UUID ballot=UUIDSerializer.serializer.deserialize(in,version);
  PartitionUpdate update=PartitionUpdate.serializer.deserialize(in,version,SerializationHelper.Flag.LOCAL,key);
  return new Commit(ballot,update);
}
