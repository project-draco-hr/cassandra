{
  final int numberOfParameters=65535;
  Map<String,String> params=new HashMap<>(numberOfParameters);
  for (int i=0; i < numberOfParameters; ++i)   params.put("key" + i,Integer.toString(i,16));
  try {
    CommitLogDescriptor desc=new CommitLogDescriptor(CommitLogDescriptor.VERSION_30,21,new ParameterizedClass("LZ4Compressor",params));
    ByteBuffer buf=ByteBuffer.allocate(1024000);
    CommitLogDescriptor.writeHeader(buf,desc);
    fail("Parameter object too long should fail on writing descriptor.");
  }
 catch (  ConfigurationException e) {
  }
}
