{
  if (token.position() == 0 && token.arrayOffset() == 0 && token.limit() == token.capacity()) {
    return token.array();
  }
 else {
    token.mark();
    byte[] buf=new byte[token.remaining()];
    token.get(buf);
    token.reset();
    return buf;
  }
}
