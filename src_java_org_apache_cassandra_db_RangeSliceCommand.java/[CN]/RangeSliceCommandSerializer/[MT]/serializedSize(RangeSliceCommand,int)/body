{
  long size=TypeSizes.NATIVE.sizeof(rsc.keyspace);
  size+=TypeSizes.NATIVE.sizeof(rsc.columnFamily);
  if (version >= MessagingService.VERSION_20)   size+=TypeSizes.NATIVE.sizeof(rsc.timestamp);
  IDiskAtomFilter filter=rsc.predicate;
  if (version < MessagingService.VERSION_20) {
    ByteBuffer sc=null;
    CFMetaData metadata=Schema.instance.getCFMetaData(rsc.keyspace,rsc.columnFamily);
    if (metadata.cfType == ColumnFamilyType.Super) {
      SuperColumns.SCFilter scFilter=SuperColumns.filterToSC((CompositeType)metadata.comparator,filter);
      sc=scFilter.scName;
      filter=scFilter.updatedFilter;
    }
    if (sc != null) {
      size+=TypeSizes.NATIVE.sizeof(sc.remaining());
      size+=sc.remaining();
    }
 else {
      size+=TypeSizes.NATIVE.sizeof(0);
    }
  }
  size+=IDiskAtomFilter.Serializer.instance.serializedSize(filter,version);
  if (rsc.rowFilter == null) {
    size+=TypeSizes.NATIVE.sizeof(0);
  }
 else {
    size+=TypeSizes.NATIVE.sizeof(rsc.rowFilter.size());
    for (    IndexExpression expr : rsc.rowFilter) {
      size+=TypeSizes.NATIVE.sizeofWithShortLength(expr.column_name);
      size+=TypeSizes.NATIVE.sizeof(expr.op.getValue());
      size+=TypeSizes.NATIVE.sizeofWithShortLength(expr.value);
    }
  }
  size+=AbstractBounds.serializer.serializedSize(rsc.keyRange,version);
  size+=TypeSizes.NATIVE.sizeof(rsc.maxResults);
  size+=TypeSizes.NATIVE.sizeof(rsc.countCQL3Rows);
  size+=TypeSizes.NATIVE.sizeof(rsc.isPaging);
  return size;
}
