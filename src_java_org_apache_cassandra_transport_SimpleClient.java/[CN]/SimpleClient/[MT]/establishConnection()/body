{
  bootstrap=new ClientBootstrap(new NioClientSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool()));
  bootstrap.setOption("tcpNoDelay",true);
  if (encryptionOptions.enabled) {
    bootstrap.setPipelineFactory(new SecurePipelineFactory());
  }
 else {
    bootstrap.setPipelineFactory(new PipelineFactory());
  }
  ChannelFuture future=bootstrap.connect(new InetSocketAddress(host,port));
  channel=future.awaitUninterruptibly().getChannel();
  if (!future.isSuccess()) {
    bootstrap.releaseExternalResources();
    throw new IOException("Connection Error",future.getCause());
  }
}
