{
  logger.debug("Updating column {} definition for index {}",columnName,indexName);
  CFMetaData cfm=Schema.instance.getCFMetaData(keyspace(),columnFamily()).clone();
  ColumnDefinition cd=cfm.getColumnDefinition(columnName.key);
  if (isCustom) {
    try {
      cd.setIndexType(IndexType.CUSTOM,props.getOptions());
    }
 catch (    SyntaxException e) {
      throw new AssertionError();
    }
  }
 else   if (cfm.getCfDef().isComposite) {
    cd.setIndexType(IndexType.COMPOSITES,Collections.<String,String>emptyMap());
  }
 else {
    cd.setIndexType(IndexType.KEYS,Collections.<String,String>emptyMap());
  }
  cd.setIndexName(indexName);
  cfm.addDefaultIndexNames();
  MigrationManager.announceColumnFamilyUpdate(cfm,false);
}
