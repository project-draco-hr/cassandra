{
  if (!output.hasArray())   throw new IllegalArgumentException("DeflateCompressor doesn't work with direct byte buffers");
  if (input.hasArray())   return uncompress(input.array(),input.arrayOffset() + input.position(),input.remaining(),output.array(),output.arrayOffset() + output.position());
  return uncompress(ByteBufferUtil.getArray(input),0,input.remaining(),output.array(),output.arrayOffset() + output.position());
}
