def shutdown(self):
    self.stopTrying()
    for p in self._protos:
        if p.transport:
            p.transport.loseConnection()
    for d in self._pending:
        if (not d.called):
            d.errback(UserError(string='Shutdown requested'))
