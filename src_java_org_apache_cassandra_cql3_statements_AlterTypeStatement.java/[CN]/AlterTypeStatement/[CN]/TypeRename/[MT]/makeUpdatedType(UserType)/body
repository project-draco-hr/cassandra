{
  KSMetaData ksm=Schema.instance.getKSMetaData(newName.getKeyspace());
  if (ksm == null)   throw new InvalidRequestException("Unknown keyspace " + newName.getKeyspace());
  UserType previous=ksm.userTypes.getType(newName.getUserTypeName());
  if (previous != null)   throw new InvalidRequestException(String.format("Cannot rename user type %s to %s as another type of that name exists",name,newName));
  return new UserType(newName.getKeyspace(),newName.getUserTypeName(),new ArrayList<>(toUpdate.columnNames),new ArrayList<>(toUpdate.types));
}
