{
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  ByteBuffer value4=ByteBufferUtil.bytes(4);
  SingleColumnRestriction.EQ singleEq=new SingleColumnRestriction.EQ(toTerm(value1),false);
  MultiColumnRestriction.EQ multiEq=new MultiColumnRestriction.EQ(toMultiItemTerminal(value2,value3),false);
  Restriction[] restrictions=new Restriction[]{singleEq,multiEq,multiEq};
  CFDefinition cfDef=createCFDefinition(restrictions.length);
  List<ByteBuffer> bounds=executeBuildBound(cfDef,restrictions,Bound.START);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3);
  bounds=executeBuildBound(cfDef,restrictions,Bound.END);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3);
  singleEq=new SingleColumnRestriction.EQ(toTerm(value1),false);
  SingleColumnRestriction.EQ singleEq2=new SingleColumnRestriction.EQ(toTerm(value2),false);
  multiEq=new MultiColumnRestriction.EQ(toMultiItemTerminal(value3,value4),false);
  restrictions=new Restriction[]{singleEq,singleEq2,multiEq,multiEq};
  cfDef=createCFDefinition(restrictions.length);
  bounds=executeBuildBound(cfDef,restrictions,Bound.START);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3,value4);
  bounds=executeBuildBound(cfDef,restrictions,Bound.END);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3,value4);
  singleEq=new SingleColumnRestriction.EQ(toTerm(value3),false);
  multiEq=new MultiColumnRestriction.EQ(toMultiItemTerminal(value1,value2),false);
  restrictions=new Restriction[]{multiEq,multiEq,singleEq};
  cfDef=createCFDefinition(restrictions.length);
  bounds=executeBuildBound(cfDef,restrictions,Bound.START);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3);
  bounds=executeBuildBound(cfDef,restrictions,Bound.END);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3);
  singleEq=new SingleColumnRestriction.EQ(toTerm(value1),false);
  singleEq2=new SingleColumnRestriction.EQ(toTerm(value4),false);
  multiEq=new MultiColumnRestriction.EQ(toMultiItemTerminal(value2,value3),false);
  restrictions=new Restriction[]{singleEq,multiEq,multiEq,singleEq2};
  cfDef=createCFDefinition(restrictions.length);
  bounds=executeBuildBound(cfDef,restrictions,Bound.START);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3,value4);
  bounds=executeBuildBound(cfDef,restrictions,Bound.END);
  assertEquals(1,bounds.size());
  assertComposite(cfDef,bounds.get(0),value1,value2,value3,value4);
}
