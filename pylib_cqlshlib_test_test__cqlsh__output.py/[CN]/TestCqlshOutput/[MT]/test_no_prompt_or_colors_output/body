def test_no_prompt_or_colors_output(self):
    queries = (('select * from has_all_types limit 1;', 5), ('select * from has_value_encoding_errors limit 1;', 6))
    for termname in ('', 'dumb', 'vt100', 'xterm'):
        cqlshlog.debug(('TERM=%r' % termname))
        for (cql, lines_expected) in queries:
            (output, result) = testcall_cqlsh(prompt=None, env={'TERM': termname, }, tty=False, input=(cql + '\n'))
            output = output.splitlines()
            for line in output:
                self.assertNoHasColors(line)
                self.assertNotRegexpMatches(line, '^cqlsh\\S*>')
            self.assertEqual(len(output), lines_expected, msg=('output: %r' % '\n'.join(output)))
            self.assertEqual(output[0], '')
            self.assertNicelyFormattedTableHeader(output[1])
            self.assertNicelyFormattedTableRule(output[2])
            self.assertNicelyFormattedTableData(output[3])
            self.assertEqual(output[4].strip(), '')
