{
  try {
    while (!stopped) {
      select();
    }
  }
 catch (  Throwable t) {
    if (t instanceof OutOfMemoryError)     Throwables.propagate(t);
    StorageMetrics.exceptions.inc();
    LOGGER.error("Uncaught Exception: ",t);
  }
 finally {
    try {
      for (      SelectionKey key : selector.keys()) {
        cleanupSelectionkey(key);
      }
      selector.close();
    }
 catch (    IOException e) {
    }
  }
}
