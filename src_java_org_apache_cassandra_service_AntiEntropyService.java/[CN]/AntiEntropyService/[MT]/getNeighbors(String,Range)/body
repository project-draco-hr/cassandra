{
  StorageService ss=StorageService.instance;
  Map<Range,List<InetAddress>> replicaSets=ss.getRangeToAddressMap(table);
  if (!replicaSets.containsKey(range))   return Collections.emptySet();
  Set<InetAddress> neighbors=new HashSet<InetAddress>(replicaSets.get(range));
  neighbors.remove(FBUtilities.getLocalAddress());
  for (  InetAddress endpoint : neighbors) {
    if (Gossiper.instance.getVersion(endpoint) <= MessagingService.VERSION_07) {
      logger.info("Excluding " + endpoint + " from repair because it is on version 0.7 or sooner. You should consider updating this node before running repair again.");
      neighbors.remove(endpoint);
    }
  }
  return neighbors;
}
