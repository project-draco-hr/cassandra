{
  RangeTombstoneList superset;
  RangeTombstoneList subset;
  RangeTombstoneList diff;
  Iterator<RangeTombstone> iter;
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  assertNull(subset.diff(superset));
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  subset.add(rt(1,2,3));
  subset.add(rt(3,4,4));
  subset.add(rt(5,6,5));
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(1,10,10),iter.next());
  assertRT(rt(20,30,10),iter.next());
  assertRT(rt(40,50,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  subset.add(rt(1,2,1));
  subset.add(rt(3,4,2));
  subset.add(rt(5,6,3));
  superset.add(rt(1,5,2));
  superset.add(rt(5,6,3));
  superset.add(rt(6,10,2));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(1,5,2),iter.next());
  assertRT(rt(6,10,2),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(1,50,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(20,50,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,20));
  superset.add(rt(40,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(20,30,20),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(1,2,3));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(1,10,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,25,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(20,30,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,55,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(40,55,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(20,30,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(20,30,10));
  subset.add(rt(40,50,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(1,10,10),iter.next());
  assertFalse(iter.hasNext());
  superset=new RangeTombstoneList(cmp,10);
  subset=new RangeTombstoneList(cmp,10);
  superset.add(rt(1,10,10));
  superset.add(rt(20,30,10));
  superset.add(rt(40,50,10));
  subset.add(rt(1,10,10));
  subset.add(rt(20,30,10));
  diff=subset.diff(superset);
  iter=diff.iterator();
  assertRT(rt(40,50,10),iter.next());
  assertFalse(iter.hasNext());
}
