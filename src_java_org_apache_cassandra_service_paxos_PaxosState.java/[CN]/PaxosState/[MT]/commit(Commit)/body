{
  Tracing.trace("committing proposal {}",proposal);
  RowMutation rm=proposal.makeMutation();
  Keyspace.open(rm.getKeyspaceName()).apply(rm,true);
synchronized (lockFor(proposal.key)) {
    PaxosState state=SystemKeyspace.loadPaxosState(proposal.key,proposal.update.metadata());
    SystemKeyspace.savePaxosCommit(proposal,!state.inProgressCommit.isAfter(proposal));
  }
}
