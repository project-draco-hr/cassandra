{
  CBUtil.BufferBuilder builder=new CBUtil.BufferBuilder(2,0,rs.metadata.names.size() * rs.rows.size());
  builder.add(Metadata.codec.encode(rs.metadata,version));
  builder.add(CBUtil.intToCB(rs.rows.size()));
  for (  List<ByteBuffer> row : rs.rows) {
    for (    ByteBuffer bb : row)     builder.addValue(bb);
  }
  return builder.build();
}
