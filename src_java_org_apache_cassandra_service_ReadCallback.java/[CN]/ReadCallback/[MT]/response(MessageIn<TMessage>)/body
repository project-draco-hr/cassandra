{
  boolean hasAdded=resolver.preprocess(message);
  int n=(waitingFor(message) && hasAdded) ? received.incrementAndGet() : received.get();
  if (n >= blockfor && resolver.isDataPresent()) {
    condition.signal();
    maybeResolveForRepair();
  }
}
