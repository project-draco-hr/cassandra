def writeresult(self, text, color=None, newline=True, out=None):
    if (out is None):
        out = self.query_out
    out.write((self.applycolor(str(text), color) + ('\n' if newline else '')))
