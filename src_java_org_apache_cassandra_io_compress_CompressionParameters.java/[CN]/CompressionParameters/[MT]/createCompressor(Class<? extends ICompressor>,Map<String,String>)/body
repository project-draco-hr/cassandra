{
  if (compressorClass == null)   return null;
  try {
    Method method=compressorClass.getMethod("create",Map.class);
    return (ICompressor)method.invoke(null,compressionOptions);
  }
 catch (  NoSuchMethodException e) {
    throw new ConfigurationException("create method not found",e);
  }
catch (  SecurityException e) {
    throw new ConfigurationException("Access forbiden",e);
  }
catch (  IllegalAccessException e) {
    throw new ConfigurationException("Cannot access method create in " + compressorClass.getName(),e);
  }
catch (  InvocationTargetException e) {
    Throwable cause=e.getCause();
    throw new ConfigurationException(String.format("%s.create() threw an error: %s",compressorClass.getSimpleName(),cause == null ? e.getClass().getName() + " " + e.getMessage() : cause.getClass().getName() + " " + cause.getMessage()),e);
  }
catch (  ExceptionInInitializerError e) {
    throw new ConfigurationException("Cannot initialize class " + compressorClass.getName());
  }
}
