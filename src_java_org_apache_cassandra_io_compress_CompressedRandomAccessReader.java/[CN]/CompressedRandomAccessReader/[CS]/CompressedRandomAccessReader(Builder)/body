{
  super(builder);
  this.metadata=builder.metadata;
  this.checksum=metadata.checksumType.newInstance();
  crcCheckChanceSupplier=builder.crcCheckChanceSupplier;
  if (regions == null) {
    compressed=allocateBuffer(metadata.compressor().initialCompressedBufferLength(metadata.chunkLength()),bufferType);
    checksumBytes=ByteBuffer.wrap(new byte[4]);
  }
}
