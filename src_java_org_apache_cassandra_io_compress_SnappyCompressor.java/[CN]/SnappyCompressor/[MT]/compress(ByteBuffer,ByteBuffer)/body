{
  int dlimit=output.limit();
  Snappy.compress(input,output);
  output.position(output.limit());
  output.limit(dlimit);
  input.position(input.limit());
}
