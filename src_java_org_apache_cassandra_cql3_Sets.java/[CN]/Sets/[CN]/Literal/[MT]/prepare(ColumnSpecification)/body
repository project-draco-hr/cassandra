{
  validateAssignableTo(receiver);
  if (receiver.type instanceof MapType && elements.isEmpty())   return new Maps.Value(Collections.<ByteBuffer,ByteBuffer>emptyMap());
  ColumnSpecification valueSpec=Sets.valueSpecOf(receiver);
  Set<Term> values=new HashSet<Term>(elements.size());
  boolean allTerminal=true;
  for (  Term.Raw rt : elements) {
    Term t=rt.prepare(valueSpec);
    if (t.containsBindMarker())     throw new InvalidRequestException(String.format("Invalid set literal for %s: bind variables are not supported inside collection literals",receiver));
    if (t instanceof Term.NonTerminal)     allTerminal=false;
    if (!values.add(t))     throw new InvalidRequestException(String.format("Invalid set literal: duplicate value %s",rt));
  }
  DelayedValue value=new DelayedValue(((SetType)receiver.type).elements,values);
  return allTerminal ? value.bind(Collections.<ByteBuffer>emptyList()) : value;
}
