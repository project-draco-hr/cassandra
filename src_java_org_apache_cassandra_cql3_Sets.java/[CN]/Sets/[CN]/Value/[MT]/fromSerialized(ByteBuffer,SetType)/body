{
  try {
    Set<?> s=type.compose(value);
    Set<ByteBuffer> elements=new LinkedHashSet<ByteBuffer>(s.size());
    for (    Object element : s)     elements.add(type.elements.decompose(element));
    return new Value(elements);
  }
 catch (  MarshalException e) {
    throw new InvalidRequestException(e.getMessage());
  }
}
