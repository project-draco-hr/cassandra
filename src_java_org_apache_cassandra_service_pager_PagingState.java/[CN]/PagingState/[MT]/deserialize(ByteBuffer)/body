{
  if (bytes == null)   return null;
  try {
    DataInputStream in=new DataInputStream(ByteBufferUtil.inputStream(bytes));
    ByteBuffer pk=ByteBufferUtil.readWithShortLength(in);
    ByteBuffer cn=ByteBufferUtil.readWithShortLength(in);
    int remaining=in.readInt();
    int remainingInPartition=in.available() > 0 ? in.readInt() : Integer.MAX_VALUE;
    return new PagingState(pk,cn,remaining,remainingInPartition);
  }
 catch (  IOException e) {
    throw new ProtocolException("Invalid value for the paging state");
  }
}
