{
  int totalLength=0;
  for (  ByteBuffer field : fields)   totalLength+=4 + field.remaining();
  ByteBuffer result=ByteBuffer.allocate(totalLength);
  for (  ByteBuffer field : fields) {
    result.putInt(field.remaining());
    result.put(field.duplicate());
  }
  result.rewind();
  return result;
}
