{
  StreamResultFuture future=StreamManager.instance.getReceivingStream(planId);
  if (future == null) {
    final StreamSession session=new StreamSession(from);
    future=new StreamResultFuture(planId,description,Collections.singleton(session));
    StreamManager.instance.registerReceiving(future);
    session.init(future);
    session.handler.initiateOnReceivingSide(socket,isForOutgoing,version);
  }
 else {
    future.attachSocket(from,socket,isForOutgoing,version);
    logger.info("[Stream #{}] Received streaming plan for {}",planId,description);
  }
  return future;
}
