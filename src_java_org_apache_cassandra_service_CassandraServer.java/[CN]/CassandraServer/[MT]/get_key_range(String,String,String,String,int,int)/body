{
  if (logger.isDebugEnabled())   logger.debug("get_key_range");
  ThriftValidation.validateCommand(tablename,columnFamily);
  if (!StorageService.getPartitioner().preservesOrder()) {
    throw new InvalidRequestException("range queries may only be performed against an order-preserving partitioner");
  }
  if (maxResults <= 0) {
    throw new InvalidRequestException("maxResults must be positive");
  }
  try {
    return StorageProxy.getKeyRange(new RangeCommand(tablename,columnFamily,startWith,stopAt,maxResults));
  }
 catch (  TimeoutException e) {
    throw new TimedOutException();
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
