{
  try {
    serverTransport_.listen();
  }
 catch (  TTransportException ttx) {
    LOGGER.error("Error occurred during listening.",ttx);
    return;
  }
  stopped_=false;
  while (!stopped_) {
    while (activeClients.get() >= args.maxWorkerThreads) {
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        throw new AssertionError(e);
      }
    }
    try {
      TTransport client=serverTransport_.accept();
      activeClients.incrementAndGet();
      WorkerProcess wp=new WorkerProcess(client);
      executorService_.execute(wp);
    }
 catch (    TTransportException ttx) {
      if (ttx.getCause() instanceof SocketTimeoutException)       continue;
      if (!stopped_) {
        LOGGER.warn("Transport error occurred during acceptance of message.",ttx);
      }
    }
    if (activeClients.get() >= args.maxWorkerThreads)     LOGGER.warn("Maximum number of clients " + args.maxWorkerThreads + " reached");
  }
  executorService_.shutdown();
}
