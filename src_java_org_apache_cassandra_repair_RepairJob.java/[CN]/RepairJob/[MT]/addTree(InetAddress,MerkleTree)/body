{
  try {
    requestsSent.await();
  }
 catch (  InterruptedException e) {
    throw new AssertionError("Interrupted while waiting for requests to be sent");
  }
  if (tree == null)   failed=true;
 else   trees.add(new TreeResponse(endpoint,tree));
  return treeRequests.completed(endpoint);
}
