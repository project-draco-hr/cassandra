{
  socketChannel_=SocketChannel.open();
  socketChannel_.configureBlocking(false);
  localEp_=from;
  remoteEp_=to;
  if (!socketChannel_.connect(new InetSocketAddress(remoteEp_,DatabaseDescriptor.getStoragePort()))) {
    key_=SelectorManager.getSelectorManager().register(socketChannel_,this,SelectionKey.OP_CONNECT);
  }
 else {
    key_=SelectorManager.getSelectorManager().register(socketChannel_,this,SelectionKey.OP_READ);
  }
  bStream_=true;
  lock_=new ReentrantLock();
  condition_=lock_.newCondition();
}
