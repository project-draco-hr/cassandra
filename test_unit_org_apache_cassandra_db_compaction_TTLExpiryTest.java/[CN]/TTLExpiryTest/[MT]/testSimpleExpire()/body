{
  ColumnFamilyStore cfs=Keyspace.open("Keyspace1").getColumnFamilyStore("Standard1");
  cfs.disableAutoCompaction();
  cfs.metadata.gcGraceSeconds(0);
  long timestamp=System.currentTimeMillis();
  RowMutation rm=new RowMutation("Keyspace1",Util.dk("ttl").key);
  rm.add("Standard1",ByteBufferUtil.bytes("col"),ByteBufferUtil.EMPTY_BYTE_BUFFER,timestamp,1);
  rm.add("Standard1",ByteBufferUtil.bytes("col7"),ByteBufferUtil.EMPTY_BYTE_BUFFER,timestamp,1);
  rm.apply();
  cfs.forceBlockingFlush();
  rm=new RowMutation("Keyspace1",Util.dk("ttl").key);
  rm.add("Standard1",ByteBufferUtil.bytes("col2"),ByteBufferUtil.EMPTY_BYTE_BUFFER,timestamp,1);
  rm.apply();
  cfs.forceBlockingFlush();
  rm=new RowMutation("Keyspace1",Util.dk("ttl").key);
  rm.add("Standard1",ByteBufferUtil.bytes("col3"),ByteBufferUtil.EMPTY_BYTE_BUFFER,timestamp,1);
  rm.apply();
  cfs.forceBlockingFlush();
  rm=new RowMutation("Keyspace1",Util.dk("ttl").key);
  rm.add("Standard1",ByteBufferUtil.bytes("col311"),ByteBufferUtil.EMPTY_BYTE_BUFFER,timestamp,1);
  rm.apply();
  cfs.forceBlockingFlush();
  Thread.sleep(2000);
  assertEquals(4,cfs.getSSTables().size());
  cfs.enableAutoCompaction(true);
  assertEquals(0,cfs.getSSTables().size());
}
