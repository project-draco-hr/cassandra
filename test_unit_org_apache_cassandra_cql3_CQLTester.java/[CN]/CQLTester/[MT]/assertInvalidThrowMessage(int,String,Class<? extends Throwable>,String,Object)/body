{
  try {
    if (protocolVersion == Integer.MIN_VALUE)     execute(query,values);
 else     executeNet(protocolVersion,query,values);
    String q=USE_PREPARED_VALUES ? query + " (values: " + formatAllValues(values)+ ")" : replaceValues(query,values);
    Assert.fail("Query should be invalid but no error was thrown. Query is: " + q);
  }
 catch (  Exception e) {
    if (exception != null && !exception.isAssignableFrom(e.getClass())) {
      Assert.fail("Query should be invalid but wrong error was thrown. " + "Expected: " + exception.getName() + ", got: "+ e.getClass().getName()+ ". "+ "Query is: "+ queryInfo(query,values));
    }
    if (errorMessage != null) {
      assertMessageContains(errorMessage,e);
    }
  }
}
