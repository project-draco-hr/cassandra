{
  try {
    try {
      execute(query,values);
    }
 catch (    RuntimeException e) {
      Throwable cause=e.getCause();
      if (cause instanceof InvalidRequestException)       throw cause;
    }
    String q=USE_PREPARED_VALUES ? query + " (values: " + formatAllValues(values)+ ")" : replaceValues(query,values);
    Assert.fail("Query should be invalid but no error was thrown. Query is: " + q);
  }
 catch (  InvalidRequestException e) {
    if (errorMessage != null) {
      assertMessageContains(errorMessage,e);
    }
  }
}
