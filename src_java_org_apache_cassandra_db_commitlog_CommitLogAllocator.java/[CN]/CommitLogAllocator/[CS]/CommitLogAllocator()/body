{
  Runnable runnable=new WrappedRunnable(){
    public void runMayThrow() throws Exception {
      while (run) {
        Runnable r=queue.poll(TICK_CYCLE_TIME,TimeUnit.MILLISECONDS);
        if (r != null) {
          r.run();
        }
 else {
          if (availableSegments.isEmpty() && (activeSegments.isEmpty() || createReserveSegments)) {
            logger.debug("No segments in reserve; creating a fresh one");
            createFreshSegment();
          }
        }
      }
    }
  }
;
  allocationThread=new Thread(runnable,"COMMIT-LOG-ALLOCATOR");
  allocationThread.start();
}
