{
  this.serializer=serializer;
  EvictionListener<K,FreeableMemory> listener=new EvictionListener<K,FreeableMemory>(){
    public void onEviction(    K k,    FreeableMemory mem){
      mem.free();
    }
  }
;
  this.map=new ConcurrentLinkedHashMap.Builder<K,FreeableMemory>().weigher(Weighers.<FreeableMemory>singleton()).initialCapacity(capacity).maximumWeightedCapacity(capacity).concurrencyLevel(DEFAULT_CONCURENCY_LEVEL).listener(listener).build();
}
