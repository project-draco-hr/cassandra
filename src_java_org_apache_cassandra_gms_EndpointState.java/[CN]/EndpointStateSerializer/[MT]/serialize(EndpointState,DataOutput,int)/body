{
  HeartBeatState hbState=epState.getHeartBeatState();
  HeartBeatState.serializer.serialize(hbState,out,version);
  int size=epState.applicationState.size();
  out.writeInt(size);
  for (  Map.Entry<ApplicationState,VersionedValue> entry : epState.applicationState.entrySet()) {
    VersionedValue value=entry.getValue();
    out.writeInt(entry.getKey().ordinal());
    VersionedValue.serializer.serialize(value,out,version);
  }
}
