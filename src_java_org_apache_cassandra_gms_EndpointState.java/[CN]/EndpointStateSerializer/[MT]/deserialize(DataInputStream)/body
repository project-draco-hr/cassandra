{
  HeartBeatState hbState=HeartBeatState.serializer().deserialize(dis);
  EndpointState epState=new EndpointState(hbState);
  int appStateSize=dis.readInt();
  for (int i=0; i < appStateSize; ++i) {
    if (dis.available() == 0) {
      break;
    }
    int key=dis.readInt();
    VersionedValue value=VersionedValue.serializer.deserialize(dis);
    epState.addApplicationState(Gossiper.STATES[key],value);
  }
  return epState;
}
