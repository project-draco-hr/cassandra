{
  HeartBeatState hbState=HeartBeatState.serializer().deserialize(dis);
  EndpointState epState=new EndpointState(hbState);
  int appStateSize=dis.readInt();
  for (int i=0; i < appStateSize; ++i) {
    if (dis.available() == 0) {
      break;
    }
    String key=dis.readUTF();
    ApplicationState appState=ApplicationState.serializer.deserialize(dis);
    epState.addApplicationState(key,appState);
  }
  return epState;
}
