{
  if (ub <= 0)   throw new IllegalArgumentException("ub must be positive");
  if (lastUb != ub) {
    bs.clear();
    lastUb=ub;
  }
 else   if (bs.cardinality() == ub) {
    bs.clear();
  }
  int value=super.nextInt(ub);
  while (bs.get(value)) {
    value=super.nextInt(ub);
  }
  bs.set(value);
  return value;
}
