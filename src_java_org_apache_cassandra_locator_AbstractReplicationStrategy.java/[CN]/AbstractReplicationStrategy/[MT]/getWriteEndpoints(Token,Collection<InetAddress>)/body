{
  Map<Token,InetAddress> tokenToEndPointMap=tokenMetadata_.cloneTokenEndPointMap();
  Map<Token,InetAddress> bootstrapTokensToEndpointMap=tokenMetadata_.cloneBootstrapNodes();
  ArrayList<InetAddress> endpoints=new ArrayList<InetAddress>(naturalEndpoints);
  for (  Token t : bootstrapTokensToEndpointMap.keySet()) {
    InetAddress ep=bootstrapTokensToEndpointMap.get(t);
    tokenToEndPointMap.put(t,ep);
    try {
      for (      Range r : getRangeMap(tokenToEndPointMap).get(ep)) {
        if (r.contains(token)) {
          endpoints.add(ep);
          break;
        }
      }
    }
  finally {
      tokenToEndPointMap.remove(t);
    }
  }
  return endpoints;
}
