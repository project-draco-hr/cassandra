{
  Map<Token,InetAddress> tokenToEndPointMap=tokenMetadata_.cloneTokenEndPointMap();
  Map<Token,InetAddress> bootstrapTokensToEndpointMap=tokenMetadata_.cloneBootstrapNodes();
  ArrayList<InetAddress> list=new ArrayList<InetAddress>(Arrays.asList(getReadStorageEndPoints(token,tokenToEndPointMap)));
  for (  Token t : bootstrapTokensToEndpointMap.keySet()) {
    InetAddress ep=bootstrapTokensToEndpointMap.get(t);
    tokenToEndPointMap.put(t,ep);
    try {
      for (      Range r : getRangeMap(tokenToEndPointMap).get(ep)) {
        if (r.contains(token)) {
          list.add(ep);
          break;
        }
      }
    }
  finally {
      tokenToEndPointMap.remove(t);
    }
  }
  return list.toArray(new InetAddress[list.size()]);
}
