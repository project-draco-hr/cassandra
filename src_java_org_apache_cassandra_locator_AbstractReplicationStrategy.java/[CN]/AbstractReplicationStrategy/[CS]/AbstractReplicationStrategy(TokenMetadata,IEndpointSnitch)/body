{
  this.tokenMetadata=tokenMetadata;
  this.snitch=snitch;
  cachedEndpoints=new NonBlockingHashMap<EndpointCacheKey,ArrayList<InetAddress>>();
  this.tokenMetadata.register(this);
  if (this.snitch != null)   this.snitch.register(this);
}
