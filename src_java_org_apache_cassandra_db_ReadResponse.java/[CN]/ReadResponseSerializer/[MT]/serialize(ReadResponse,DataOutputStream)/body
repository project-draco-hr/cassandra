{
  dos.writeInt(rm.isDigestQuery() ? rm.digest().remaining() : 0);
  ByteBuffer buffer=rm.isDigestQuery() ? rm.digest() : ByteBufferUtil.EMPTY_BYTE_BUFFER;
  ByteBufferUtil.write(buffer,dos);
  dos.writeBoolean(rm.isDigestQuery());
  if (!rm.isDigestQuery()) {
    Row.serializer().serialize(rm.row(),dos);
  }
}
