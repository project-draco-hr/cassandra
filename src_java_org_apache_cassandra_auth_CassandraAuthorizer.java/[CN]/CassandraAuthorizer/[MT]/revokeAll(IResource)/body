{
  UntypedResultSet rows;
  try {
    rows=process(String.format("SELECT username FROM %s.%s WHERE resource = '%s' ALLOW FILTERING",Auth.AUTH_KS,PERMISSIONS_CF,escape(droppedResource.getName())));
  }
 catch (  Throwable e) {
    logger.warn("CassandraAuthorizer failed to revoke all permissions on {}: {}",droppedResource,e);
    return;
  }
  for (  UntypedResultSet.Row row : rows) {
    try {
      process(String.format("DELETE FROM %s.%s WHERE username = '%s' AND resource = '%s'",Auth.AUTH_KS,PERMISSIONS_CF,escape(row.getString(USERNAME)),escape(droppedResource.getName())));
    }
 catch (    Throwable e) {
      logger.warn("CassandraAuthorizer failed to revoke all permissions on {}: {}",droppedResource,e);
    }
  }
}
