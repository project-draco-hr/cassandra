{
  writer.execute(new WrappedRunnable(){
    public void runMayThrow() throws IOException {
      waitForWriters();
      cfs.flushLock.lock();
      try {
        if (!cfs.isDropped()) {
          SSTableReader sstable=writeSortedContents();
          cfs.replaceFlushed(Memtable.this,sstable);
        }
      }
  finally {
        cfs.flushLock.unlock();
      }
      latch.countDown();
    }
  }
);
}
