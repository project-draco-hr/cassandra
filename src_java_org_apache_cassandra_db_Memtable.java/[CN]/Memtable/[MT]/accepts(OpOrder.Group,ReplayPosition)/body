{
  OpOrder.Barrier barrier=this.writeBarrier;
  if (barrier == null)   return true;
  if (!barrier.isAfter(opGroup))   return false;
  if (replayPosition == null)   return true;
  while (true) {
    ReplayPosition currentLast=lastReplayPosition.get();
    if (currentLast instanceof LastReplayPosition)     return currentLast.compareTo(replayPosition) >= 0;
    if (currentLast != null && currentLast.compareTo(replayPosition) >= 0)     return true;
    if (lastReplayPosition.compareAndSet(currentLast,replayPosition))     return true;
  }
}
