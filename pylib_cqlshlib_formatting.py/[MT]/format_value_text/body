@formatter_for('text')
def format_value_text(val, encoding, colormap, **_):
    escapedval = val.replace(u'\\', u'\\\\')
    escapedval = unicode_controlchars_re.sub(_show_control_chars, escapedval)
    bval = escapedval.encode(encoding, 'backslashreplace')
    displaywidth = wcwidth.wcswidth(bval.decode(encoding))
    tbr = _make_turn_bits_red_f(colormap['hex'], colormap['text'])
    coloredval = ((colormap['text'] + bits_to_turn_red_re.sub(tbr, bval)) + colormap['reset'])
    return FormattedValue(bval, coloredval)
