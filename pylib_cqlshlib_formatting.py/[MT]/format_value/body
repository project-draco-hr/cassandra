def format_value(cqltype, val, **kwargs):
    if ((val == '') and (not cqltype.empty_binary_ok)):
        return format_value_default(val, **kwargs)
    formatter = _formatters.get(cqltype.typename, format_value_default)
    return formatter(val, subtypes=cqltype.subtypes, **kwargs)
