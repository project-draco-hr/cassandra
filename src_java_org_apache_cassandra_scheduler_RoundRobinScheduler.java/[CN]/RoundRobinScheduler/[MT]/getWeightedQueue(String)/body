{
  Pair<Integer,SynchronousQueue<Thread>> weightedQueue=queues.get(id);
  if (weightedQueue != null)   return weightedQueue;
  Pair<Integer,SynchronousQueue<Thread>> maybenew=new Pair(getWeight(id),new SynchronousQueue<Thread>(true));
  weightedQueue=queues.putIfAbsent(id,maybenew);
  if (weightedQueue == null)   return maybenew;
  return weightedQueue;
}
