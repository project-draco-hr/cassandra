{
  lock_.lock();
  try {
    responses_.add(response);
    int majority=(DatabaseDescriptor.getReplicationFactor() >> 1) + 1;
    if (responses_.size() >= majority && responseResolver_.isDataPresent(responses_)) {
      onCompletion();
    }
  }
 catch (  IOException ex) {
    logger_.info(LogUtil.throwableToString(ex));
  }
 finally {
    lock_.unlock();
  }
}
