{
  listenGate=new SimpleCondition();
  verbHandlers_=new EnumMap<StorageService.Verb,IVerbHandler>(StorageService.Verb.class);
  callbackMap_=new ExpiringMap<String,IAsyncCallback>((long)(1.1 * DatabaseDescriptor.getRpcTimeout()));
  taskCompletionMap_=new ExpiringMap<String,IAsyncResult>((long)(1.1 * DatabaseDescriptor.getRpcTimeout()));
  streamExecutor_=new JMXEnabledThreadPoolExecutor("MESSAGE-STREAMING-POOL");
  TimerTask logDropped=new TimerTask(){
    public void run(){
      logDroppedMessages();
    }
  }
;
  Timer timer=new Timer("DroppedMessagesLogger");
  timer.schedule(logDropped,LOG_DROPPED_INTERVAL_IN_MS,LOG_DROPPED_INTERVAL_IN_MS);
  MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  try {
    mbs.registerMBean(this,new ObjectName("org.apache.cassandra.concurrent:type=MESSAGING-SERVICE-POOL"));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
