{
  verbHandlers_=new HashMap<String,IVerbHandler>();
  callbackMap_=new Cachetable<String,IAsyncCallback>(2 * DatabaseDescriptor.getRpcTimeout());
  taskCompletionMap_=new Cachetable<String,IAsyncResult>(2 * DatabaseDescriptor.getRpcTimeout());
  messageDeserializerExecutor_=new JMXEnabledThreadPoolExecutor(1,Runtime.getRuntime().availableProcessors(),Integer.MAX_VALUE,TimeUnit.SECONDS,new LinkedBlockingQueue<Runnable>(),new NamedThreadFactory("MESSAGE-DESERIALIZER-POOL"));
  streamExecutor_=new JMXEnabledThreadPoolExecutor("MESSAGE-STREAMING-POOL");
  protocol_=hash("MD5","FB-MESSAGING".getBytes());
  registerVerbHandlers(MessagingService.responseVerbHandler_,new ResponseVerbHandler());
  FailureDetector.instance.registerFailureDetectionEventListener(this);
}
