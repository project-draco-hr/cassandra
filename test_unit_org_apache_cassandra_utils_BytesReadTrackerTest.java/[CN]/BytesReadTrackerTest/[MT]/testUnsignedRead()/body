{
  byte[] testData;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  try {
    out.writeByte(0x1);
    out.writeShort(1);
    testData=baos.toByteArray();
  }
  finally {
    out.close();
  }
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(testData));
  BytesReadTracker tracker=new BytesReadTracker(in);
  try {
    int b=tracker.readUnsignedByte();
    assertEquals(b,1);
    assertEquals(1,tracker.getBytesRead());
    int s=tracker.readUnsignedShort();
    assertEquals(1,s);
    assertEquals(3,tracker.getBytesRead());
    assertEquals(testData.length,tracker.getBytesRead());
  }
  finally {
    in.close();
  }
}
