{
  if (newCapacity != capacity()) {
    SafeMemory oldBuffer=buffer;
    buffer=this.buffer.copy(newCapacity);
    oldBuffer.free();
  }
}
