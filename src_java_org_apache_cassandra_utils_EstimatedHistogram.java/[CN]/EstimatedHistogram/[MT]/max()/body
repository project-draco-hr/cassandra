{
  int lastBucket=numBuckets - 1;
  if (buckets.get(lastBucket) > 0)   throw new IllegalStateException("Unable to compute ceiling for max when all buckets are full");
  for (int i=lastBucket - 1; i >= 0; i--) {
    if (buckets.get(i) > 0)     return bucketOffsets[i];
  }
  return 0;
}
