{
  DataInputStream din=new DataInputStream(in);
  String className=din.readUTF();
  try {
    Class migrationClass=Class.forName(className);
    Field serializerField=migrationClass.getDeclaredField("serializer");
    serializerField.setAccessible(true);
    ICompactSerializer serializer=(ICompactSerializer)serializerField.get(migrationClass);
    return (Migration)serializer.deserialize(din);
  }
 catch (  Exception e) {
    throw new IOException(e);
  }
}
