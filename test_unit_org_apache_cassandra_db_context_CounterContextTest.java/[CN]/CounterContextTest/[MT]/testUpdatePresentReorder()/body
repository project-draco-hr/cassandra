{
  byte[] context;
  context=new byte[stepLength * defaultEntries];
  for (int i=0; i < defaultEntries - 1; i++) {
    cc.writeElementAtStepOffset(context,i,FBUtilities.toByteArray(i),1L,1L);
  }
  cc.writeElementAtStepOffset(context,(defaultEntries - 1),id,2L,3L);
  context=cc.update(context,idAddress,10L);
  assertEquals(context.length,stepLength * defaultEntries);
  assertEquals(3L,FBUtilities.byteArrayToLong(context,idLength));
  assertEquals(13L,FBUtilities.byteArrayToLong(context,idLength + clockLength));
  for (int i=1; i < defaultEntries; i++) {
    int offset=i * stepLength;
    assertEquals(i - 1,FBUtilities.byteArrayToInt(context,offset));
    assertEquals(1L,FBUtilities.byteArrayToLong(context,offset + idLength));
    assertEquals(1L,FBUtilities.byteArrayToLong(context,offset + idLength + clockLength));
  }
}
