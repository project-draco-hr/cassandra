{
  if (endpoint.equals(FBUtilities.getBroadcastAddress()))   return gceZone;
  EndpointState state=Gossiper.instance.getEndpointStateForEndpoint(endpoint);
  if (state == null || state.getApplicationState(ApplicationState.RACK) == null)   return DEFAULT_RACK;
  return state.getApplicationState(ApplicationState.RACK).value;
}
