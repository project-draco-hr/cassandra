{
  MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  try {
    mbs.registerMBean(this,new ObjectName("org.apache.cassandra.db:type=StorageService"));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  MessagingService.instance.registerVerbHandlers(Verb.BINARY,new BinaryVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.MUTATION,new RowMutationVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.READ_REPAIR,new ReadRepairVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.READ,new ReadVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.RANGE_SLICE,new RangeSliceVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.INDEX_SCAN,new IndexScanVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.BOOTSTRAP_TOKEN,new BootStrapper.BootstrapTokenVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.STREAM_REQUEST,new StreamRequestVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.STREAM_REPLY,new StreamReplyVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.REPLICATION_FINISHED,new ReplicationFinishedVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.REQUEST_RESPONSE,new ResponseVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.INTERNAL_RESPONSE,new ResponseVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.TREE_REQUEST,new TreeRequestVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.TREE_RESPONSE,new AntiEntropyService.TreeResponseVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.GOSSIP_DIGEST_SYN,new GossipDigestSynVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.GOSSIP_DIGEST_ACK,new GossipDigestAckVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.GOSSIP_DIGEST_ACK2,new GossipDigestAck2VerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.DEFINITIONS_ANNOUNCE,new DefinitionsAnnounceVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.DEFINITIONS_UPDATE_RESPONSE,new DefinitionsUpdateResponseVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.TRUNCATE,new TruncateVerbHandler());
  MessagingService.instance.registerVerbHandlers(Verb.SCHEMA_CHECK,new SchemaCheckVerbHandler());
  if (StreamingService.instance == null)   throw new RuntimeException("Streaming service is unavailable.");
}
