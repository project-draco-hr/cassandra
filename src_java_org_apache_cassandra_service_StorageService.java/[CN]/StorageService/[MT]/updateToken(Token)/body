{
  if (logger_.isDebugEnabled())   logger_.debug("Setting token to " + token);
  SystemTable.updateToken(token);
  tokenMetadata_.update(token,FBUtilities.getLocalAddress());
  ApplicationState state=new ApplicationState(StorageService.getPartitioner().getTokenFactory().toString(token));
  Gossiper.instance().addApplicationState(StorageService.nodeId_,state);
}
