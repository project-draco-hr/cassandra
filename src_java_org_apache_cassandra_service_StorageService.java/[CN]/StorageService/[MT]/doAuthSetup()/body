{
  try {
    if (Schema.instance.getKSMetaData(AuthKeyspace.NAME) == null) {
      maybeAddKeyspace(AuthKeyspace.definition());
    }
 else {
      for (      Map.Entry<String,CFMetaData> table : AuthKeyspace.definition().cfMetaData().entrySet()) {
        if (Schema.instance.getCFMetaData(AuthKeyspace.NAME,table.getKey()) == null)         maybeAddTable(table.getValue());
      }
    }
  }
 catch (  Exception e) {
    throw new AssertionError(e);
  }
  DatabaseDescriptor.getRoleManager().setup();
  DatabaseDescriptor.getAuthenticator().setup();
  DatabaseDescriptor.getAuthorizer().setup();
  MigrationManager.instance.register(new AuthMigrationListener());
}
