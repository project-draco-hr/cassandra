{
  if (!tokenMetadata_.isMember(FBUtilities.getLocalAddress()))   throw new UnsupportedOperationException("local node is not a member of the token ring yet");
  if (tokenMetadata_.cloneAfterAllLeft().sortedTokens().size() < 2)   throw new UnsupportedOperationException("no other normal nodes in the ring; decommission would be pointless");
  if (tokenMetadata_.getPendingRanges(FBUtilities.getLocalAddress()).size() > 0)   throw new UnsupportedOperationException("data is currently moving to this node; unable to leave the ring");
  logger_.info("DECOMMISSIONING");
  startLeaving();
  logger_.info("decommission sleeping " + StreamOut.RING_DELAY);
  Thread.sleep(StreamOut.RING_DELAY);
  Runnable finishLeaving=new Runnable(){
    public void run(){
      Gossiper.instance.stop();
      MessagingService.shutdown();
      logger_.info("DECOMMISSION FINISHED.");
    }
  }
;
  unbootstrap(finishLeaving);
}
