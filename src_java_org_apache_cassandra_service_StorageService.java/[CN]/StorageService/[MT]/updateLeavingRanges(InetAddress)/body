{
  if (logger_.isDebugEnabled())   logger_.debug(endpoint + " is leaving; calculating pendingranges");
  Multimap<Range,InetAddress> ranges=getChangedRangesForLeaving(endpoint);
  for (  Range range : ranges.keySet()) {
    for (    InetAddress newEndpoint : ranges.get(range)) {
      tokenMetadata_.addPendingRange(range,newEndpoint);
    }
  }
}
