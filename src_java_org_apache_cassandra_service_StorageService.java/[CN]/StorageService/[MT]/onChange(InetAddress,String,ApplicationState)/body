{
  Token token=getPartitioner().getTokenFactory().fromString(state.getValue());
  if (STATE_BOOTSTRAPPING.equals(stateName)) {
    if (logger_.isDebugEnabled())     logger_.debug(endpoint + " state bootstrapping, token " + token);
    updateBootstrapRanges(token,endpoint);
  }
 else   if (STATE_NORMAL.equals(stateName)) {
    if (logger_.isDebugEnabled())     logger_.debug(endpoint + " state normal, token " + token);
    tokenMetadata_.removePendingRanges(endpoint);
    updateForeignToken(token,endpoint);
  }
}
