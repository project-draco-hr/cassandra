{
  logger.debug("Starting shadow gossip round to check for endpoint collision");
  if (!MessagingService.instance().isListening())   MessagingService.instance().listen(FBUtilities.getLocalAddress());
  Gossiper.instance.doShadowRound();
  EndpointState epState=Gossiper.instance.getEndpointStateForEndpoint(FBUtilities.getBroadcastAddress());
  if (epState != null && !Gossiper.instance.isDeadState(epState)) {
    throw new RuntimeException(String.format("A node with address %s already exists, cancelling join. " + "Use cassandra.replace_address if you want to replace this node.",FBUtilities.getBroadcastAddress()));
  }
  Gossiper.instance.resetEndpointStateMap();
}
