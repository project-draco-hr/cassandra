{
  if (logger.isDebugEnabled())   logger.debug("Setting tokens to {}",tokens);
  SystemKeyspace.updateTokens(tokens);
  tokenMetadata.updateNormalTokens(tokens,FBUtilities.getBroadcastAddress());
  Collection<Token> localTokens=getLocalTokens();
  List<Pair<ApplicationState,VersionedValue>> states=new ArrayList<Pair<ApplicationState,VersionedValue>>();
  states.add(Pair.create(ApplicationState.TOKENS,valueFactory.tokens(localTokens)));
  states.add(Pair.create(ApplicationState.STATUS,valueFactory.normal(localTokens)));
  Gossiper.instance.addLocalApplicationStates(states);
  setMode(Mode.NORMAL,false);
}
