{
  out.writeUTF(cmd.keyspace);
  out.writeUTF(cmd.columnFamily);
  out.writeLong(cmd.timestamp);
  AbstractBounds.serializer.serialize(cmd.keyRange,out,version);
  CFMetaData metadata=Schema.instance.getCFMetaData(cmd.keyspace,cmd.columnFamily);
  SliceQueryFilter filter=(SliceQueryFilter)cmd.predicate;
  metadata.comparator.sliceQueryFilterSerializer().serialize(filter,out,version);
  metadata.comparator.serializer().serialize(cmd.start,out);
  metadata.comparator.serializer().serialize(cmd.stop,out);
  out.writeInt(cmd.rowFilter.size());
  for (  IndexExpression expr : cmd.rowFilter) {
    ByteBufferUtil.writeWithShortLength(expr.column,out);
    out.writeInt(expr.operator.ordinal());
    ByteBufferUtil.writeWithShortLength(expr.value,out);
  }
  out.writeInt(cmd.limit);
  if (version >= MessagingService.VERSION_21)   out.writeBoolean(cmd.countCQL3Rows);
}
