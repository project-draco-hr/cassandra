{
  Properties props=PropertyFileSnitch.resourceToProperties(DATACENTER_PROPERTY_FILENAME);
  Map<String,Map<String,Integer>> newDatacenters=new HashMap<String,Map<String,Integer>>();
  for (  Entry entry : props.entrySet()) {
    String[] keys=((String)entry.getKey()).split(":");
    Map<String,Integer> map=newDatacenters.get(keys[0]);
    if (map == null)     map=new HashMap<String,Integer>();
    map.put(keys[1],Integer.parseInt((String)entry.getValue()));
    newDatacenters.put(keys[0],map);
  }
  datacenters=Collections.unmodifiableMap(newDatacenters);
  logger.info(DATACENTER_PROPERTY_FILENAME + " changed, clearing endpoint cache");
  clearCachedEndpoints();
}
