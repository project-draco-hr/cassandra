{
  super(table,tokenMetadata,snitch,configOptions);
  if ((!(snitch instanceof AbstractRackAwareSnitch)))   throw new IllegalArgumentException("DatacenterShardStrategy requires a rack-aware endpointsnitch");
  this.snitch=(AbstractRackAwareSnitch)snitch;
  Map<String,Integer> newDatacenters=new HashMap<String,Integer>();
  for (  Entry entry : configOptions.entrySet()) {
    newDatacenters.put((String)entry.getKey(),Integer.parseInt((String)entry.getValue()));
  }
  datacenters=Collections.unmodifiableMap(newDatacenters);
}
