{
  try {
    Field keyComparator=SecondaryIndex.class.getDeclaredField("keyComparator");
    keyComparator.setAccessible(true);
    int modifiers=keyComparator.getModifiers();
    Field modifierField=keyComparator.getClass().getDeclaredField("modifiers");
    modifiers=modifiers & ~Modifier.FINAL;
    modifierField.setAccessible(true);
    modifierField.setInt(keyComparator,modifiers);
    keyComparator.set(null,comparator);
  }
 catch (  Exception ex) {
    fail("Failed to change key comparator in secondary index : " + ex.getMessage());
    ex.printStackTrace();
  }
}
