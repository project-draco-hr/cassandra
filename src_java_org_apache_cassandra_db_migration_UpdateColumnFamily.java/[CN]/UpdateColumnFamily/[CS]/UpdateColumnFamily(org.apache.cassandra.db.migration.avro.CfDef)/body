{
  super(UUIDGen.makeType1UUIDFromHost(FBUtilities.getLocalAddress()),DatabaseDescriptor.getDefsVersion());
  KSMetaData ksm=DatabaseDescriptor.getTableDefinition(cf_def.keyspace.toString());
  if (ksm == null)   throw new ConfigurationException("No such keyspace: " + cf_def.keyspace.toString());
  CFMetaData oldCfm=DatabaseDescriptor.getCFMetaData(CFMetaData.getId(cf_def.keyspace.toString(),cf_def.name.toString()));
  this.metadata=CFMetaData.inflate(oldCfm.deflate());
  this.metadata.apply(cf_def);
  KSMetaData newKsMeta=KSMetaData.inflate(ksm.deflate());
  newKsMeta.cfMetaData().get(cf_def.name.toString()).apply(cf_def);
  rm=Migration.makeDefinitionMutation(newKsMeta,null,newVersion);
}
