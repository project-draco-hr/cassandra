{
  logger.debug("Updating " + DatabaseDescriptor.getCFMetaData(metadata.cfId) + " to "+ metadata);
  try {
    DatabaseDescriptor.getCFMetaData(metadata.cfId).apply(CFMetaData.convertToAvro(metadata));
  }
 catch (  ConfigurationException ex) {
    throw new IOException(ex);
  }
  DatabaseDescriptor.setTableDefinition(null,newVersion);
  if (!clientMode) {
    Table table=Table.open(metadata.ksName);
    ColumnFamilyStore oldCfs=table.getColumnFamilyStore(metadata.cfName);
    oldCfs.reload();
  }
}
