{
  List<Future<?>> wait=new ArrayList<>();
synchronized (baseCfs.getDataTracker()) {
    for (    SecondaryIndex index : allIndexes)     if (index.getIndexCfs() != null)     wait.add(index.getIndexCfs().forceFlush());
  }
  for (  SecondaryIndex index : allIndexes)   if (index.getIndexCfs() == null)   index.forceBlockingFlush();
  FBUtilities.waitOnFutures(wait);
}
