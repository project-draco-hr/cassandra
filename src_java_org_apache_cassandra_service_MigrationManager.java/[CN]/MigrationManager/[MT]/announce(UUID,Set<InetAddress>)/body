{
  MessageProducer prod=new CacheingMessageProducer(new MessageProducer(){
    public Message getMessage(    int protocolVersion) throws IOException {
      return makeVersionMessage(version,protocolVersion);
    }
  }
);
  for (  InetAddress host : hosts) {
    try {
      MessagingService.instance().sendOneWay(prod.getMessage(Gossiper.instance.getVersion(host)),host);
    }
 catch (    IOException ex) {
      throw new IOError(ex);
    }
  }
  passiveAnnounce(version);
}
