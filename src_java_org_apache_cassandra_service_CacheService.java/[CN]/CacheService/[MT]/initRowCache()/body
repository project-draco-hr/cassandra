{
  logger.info("Initializing row cache with capacity of {} MBs",DatabaseDescriptor.getRowCacheSizeInMB());
  long rowCacheInMemoryCapacity=DatabaseDescriptor.getRowCacheSizeInMB() * 1024 * 1024;
  ICache<RowCacheKey,IRowCacheEntry> rc=new SerializingCacheProvider().create(rowCacheInMemoryCapacity);
  AutoSavingCache<RowCacheKey,IRowCacheEntry> rowCache=new AutoSavingCache<>(rc,CacheType.ROW_CACHE,new RowCacheSerializer());
  int rowCacheKeysToSave=DatabaseDescriptor.getRowCacheKeysToSave();
  rowCache.scheduleSaving(DatabaseDescriptor.getRowCacheSavePeriod(),rowCacheKeysToSave);
  return rowCache;
}
