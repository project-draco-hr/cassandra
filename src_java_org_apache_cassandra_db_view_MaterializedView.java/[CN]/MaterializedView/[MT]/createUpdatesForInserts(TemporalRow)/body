{
  TemporalRow.Resolver resolver=TemporalRow.latest;
  DecoratedKey partitionKey=viewPartitionKey(temporalRow,resolver);
  ColumnFamilyStore viewCfs=getViewCfs();
  if (partitionKey == null) {
    return null;
  }
  Row.Builder regularBuilder=BTreeRow.unsortedBuilder(viewCfs.metadata.partitionColumns().regulars,temporalRow.nowInSec);
  CBuilder clustering=CBuilder.create(viewCfs.getComparator());
  for (int i=0; i < viewCfs.metadata.clusteringColumns().size(); i++) {
    clustering.add(temporalRow.clusteringValue(viewCfs.metadata.clusteringColumns().get(i),resolver));
  }
  regularBuilder.newRow(clustering.build());
  regularBuilder.addPrimaryKeyLivenessInfo(LivenessInfo.create(viewCfs.metadata,temporalRow.viewClusteringTimestamp(),temporalRow.viewClusteringTtl(),temporalRow.viewClusteringLocalDeletionTime()));
  for (  ColumnDefinition columnDefinition : viewCfs.metadata.allColumns()) {
    if (columnDefinition.isPrimaryKeyColumn())     continue;
    for (    Cell cell : temporalRow.values(columnDefinition,resolver)) {
      regularBuilder.addCell(cell);
    }
  }
  return PartitionUpdate.singleRowUpdate(viewCfs.metadata,partitionKey,regularBuilder.build());
}
