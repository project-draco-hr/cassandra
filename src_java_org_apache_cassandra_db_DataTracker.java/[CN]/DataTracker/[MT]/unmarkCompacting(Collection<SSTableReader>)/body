{
  boolean isValid=cfstore.isValid();
  if (!isValid) {
    for (    SSTableReader sstable : unmark)     sstable.markCompacted();
  }
  View currentView, newView;
  do {
    currentView=view.get();
    newView=currentView.unmarkCompacting(unmark);
  }
 while (!view.compareAndSet(currentView,newView));
  if (!isValid) {
    unreferenceSSTables();
  }
}
