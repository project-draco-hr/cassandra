{
  if (!cfstore.isValid()) {
    removeOldSSTablesSize(replacements);
    replacements=Collections.emptyList();
  }
  View currentView, newView;
  do {
    currentView=view.get();
    newView=currentView.replace(oldSSTables,replacements);
  }
 while (!view.compareAndSet(currentView,newView));
  postReplace(oldSSTables,replacements);
}
