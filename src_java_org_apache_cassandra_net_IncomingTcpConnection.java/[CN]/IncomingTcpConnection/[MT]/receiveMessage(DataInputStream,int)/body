{
  if (version < MessagingService.VERSION_12)   input.readInt();
  String id=input.readUTF();
  long timestamp=System.currentTimeMillis();
  ;
  if (version >= MessagingService.VERSION_12) {
    int partial=input.readInt();
    if (DatabaseDescriptor.hasCrossNodeTimeout())     timestamp=(timestamp & 0xFFFFFFFF00000000L) | (((partial & 0xFFFFFFFFL) << 2) >> 2);
  }
  MessageIn message=MessageIn.read(input,version,id);
  if (message == null) {
    return null;
  }
  if (version <= MessagingService.current_version) {
    MessagingService.instance().receive(message,id,timestamp);
  }
 else {
    logger.debug("Received connection from newer protocol version {}. Ignoring message",version);
  }
  return message.from;
}
