{
  try {
    connectAttempt();
    stream();
    if (StreamOutSession.get(to,header.sessionId).getFiles().size() == 0) {
      receiveReply();
      logger.info("Finished streaming session to {}",to);
    }
  }
  finally {
    try {
      close();
    }
 catch (    IOException e) {
      if (logger.isDebugEnabled())       logger.debug("error closing socket",e);
    }
  }
  if (logger.isDebugEnabled())   logger.debug("Done streaming " + header.file);
}
