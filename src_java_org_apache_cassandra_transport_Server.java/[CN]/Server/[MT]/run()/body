{
  IAuthenticator authenticator=DatabaseDescriptor.getAuthenticator();
  if (authenticator.requireAuthentication() && !(authenticator instanceof ISaslAwareAuthenticator)) {
    logger.error("Not starting native transport as the configured IAuthenticator is not capable of SASL authentication");
    isRunning.compareAndSet(true,false);
    return;
  }
  eventExecutorGroup=new RequestThreadPoolExecutor();
  workerGroup=new NioEventLoopGroup();
  ServerBootstrap bootstrap=new ServerBootstrap().group(workerGroup).channel(NioServerSocketChannel.class).childOption(ChannelOption.TCP_NODELAY,true).childOption(ChannelOption.ALLOCATOR,CBUtil.allocator).childOption(ChannelOption.WRITE_BUFFER_HIGH_WATER_MARK,32 * 1024).childOption(ChannelOption.WRITE_BUFFER_LOW_WATER_MARK,8 * 1024);
  final EncryptionOptions.ClientEncryptionOptions clientEnc=DatabaseDescriptor.getClientEncryptionOptions();
  if (clientEnc.enabled) {
    logger.info("Enabling encrypted CQL connections between client and server");
    bootstrap.childHandler(new SecureInitializer(this,clientEnc));
  }
 else {
    bootstrap.childHandler(new Initializer(this));
  }
  logger.info("Using Netty Version: {}",Version.identify().entrySet());
  logger.info("Starting listening for CQL clients on {}...",socket);
  Channel channel=bootstrap.bind(socket).channel();
  connectionTracker.allChannels.add(channel);
  isRunning.set(true);
}
