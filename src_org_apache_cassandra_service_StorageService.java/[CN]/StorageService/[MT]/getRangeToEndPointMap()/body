{
  Map<BigInteger,EndPoint> tokenToEndPointMap=tokenMetadata_.cloneTokenEndPointMap();
  Set<BigInteger> tokens=tokenToEndPointMap.keySet();
  Range[] ranges=getAllRanges(tokens);
  Map<Range,List<EndPoint>> oldRangeToEndPointMap=constructRangeToEndPointMap(ranges);
  return oldRangeToEndPointMap;
}
