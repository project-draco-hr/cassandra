{
  if (version == MessagingService.VERSION_07) {
    ObjectInputStream in=new ObjectInputStream(dis);
    try {
      return (MerkleTree)in.readObject();
    }
 catch (    ClassNotFoundException ex) {
      throw new IOException(ex);
    }
  }
 else {
    byte hashdepth=dis.readByte();
    long maxsize=dis.readLong();
    long size=dis.readLong();
    MerkleTree mt=new MerkleTree(null,hashdepth,maxsize);
    mt.size=size;
    mt.root=Hashable.serializer.deserialize(dis,version);
    return mt;
  }
}
