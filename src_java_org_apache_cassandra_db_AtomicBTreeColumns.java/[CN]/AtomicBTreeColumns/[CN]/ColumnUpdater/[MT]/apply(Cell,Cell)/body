{
  if (replaced == null) {
    indexer.insert(update);
    delta+=update.dataSize();
  }
 else {
    Cell reconciled=update.reconcile(replaced,allocator);
    if (reconciled == update)     indexer.update(replaced,reconciled);
 else     indexer.update(update,reconciled);
    delta+=reconciled.dataSize() - replaced.dataSize();
  }
  return transform.apply(update);
}
