{
  while (true) {
    Holder current=ref;
    if (!current.deletionInfo.hasPurgeableTombstones(gcBefore))     break;
    DeletionInfo purgedInfo=current.deletionInfo.copy();
    purgedInfo.purge(gcBefore);
    if (refUpdater.compareAndSet(this,current,current.with(purgedInfo)))     break;
  }
}
