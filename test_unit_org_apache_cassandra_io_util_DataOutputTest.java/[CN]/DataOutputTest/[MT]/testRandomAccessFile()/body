{
  File file=FileUtils.createTempFile("dataoutput","test");
  try {
    final RandomAccessFile raf=new RandomAccessFile(file,"rw");
    DataOutputStreamAndChannel write=new DataOutputStreamAndChannel(Channels.newOutputStream(raf.getChannel()),raf.getChannel());
    DataInput canon=testWrite(write);
    write.close();
    DataInputStream test=new DataInputStream(new FileInputStream(file));
    testRead(test,canon);
    test.close();
  }
  finally {
    Assert.assertTrue(file.delete());
  }
}
