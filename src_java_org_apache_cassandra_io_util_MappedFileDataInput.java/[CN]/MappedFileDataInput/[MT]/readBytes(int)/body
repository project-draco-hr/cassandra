{
  int remaining=buffer.remaining() - position;
  if (length > remaining)   throw new IOException(String.format("mmap segment underflow; remaining is %d but %d requested",remaining,length));
  ByteBuffer bytes=buffer.duplicate();
  bytes.position(buffer.position() + position).limit(buffer.position() + position + length);
  position+=length;
  return bytes;
}
