{
  CommitLogDescriptor desc=new CommitLogDescriptor(4,null);
  final File logFile=tmpFile(desc.version);
  ByteBuffer buf=ByteBuffer.allocate(1024);
  CommitLogDescriptor.writeHeader(buf,desc);
  try (OutputStream lout=new FileOutputStream(logFile)){
    lout.write(buf.array(),0,buf.position());
    runExpecting(new WrappedRunnable(){
      public void runMayThrow() throws Exception {
        CommitLog.instance.recover(logFile.getPath());
      }
    }
,CommitLogReplayException.class);
  }
 }
