{
  File path=getLocationWithMaximumAvailableSpace(estimatedSize,ensureFreeSpace);
  if (path == null && (DatabaseDescriptor.getDiskAccessMode() == Config.DiskAccessMode.mmap || DatabaseDescriptor.getIndexAccessMode() == Config.DiskAccessMode.mmap) && !MmappedSegmentedFile.isCleanerAvailable()) {
    StorageService.instance.requestGC();
    SSTableDeletingTask.rescheduleFailedTasks();
    try {
      Thread.sleep(10000);
    }
 catch (    InterruptedException e) {
      throw new AssertionError(e);
    }
    path=getLocationWithMaximumAvailableSpace(estimatedSize,ensureFreeSpace);
  }
  return path;
}
