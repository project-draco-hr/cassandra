{
  if (!input.isDirectory())   return 0;
  TrueFilesSizeVisitor visitor=new TrueFilesSizeVisitor();
  try {
    Files.walkFileTree(input.toPath(),visitor);
  }
 catch (  IOException e) {
    logger.error("Could not calculate the size of {}. {}",input,e);
  }
  return visitor.getAllocatedSize();
}
