{
  String tag=snapshotName == null ? "" : snapshotName;
  for (  File dir : snapshotDirectories) {
    File snapshotDir=new File(dir,join(SNAPSHOT_SUBDIR,tag));
    if (snapshotDir.exists()) {
      logger.debug("Removing snapshot directory {}",snapshotDir);
      try {
        FileUtils.deleteRecursive(snapshotDir);
      }
 catch (      FSWriteError e) {
        if (FBUtilities.isWindows()) {
          logger.warn("Failed to delete snapshot directory [{}]. Folder will be deleted on JVM shutdown or next node restart on crash. You can safely attempt to delete this folder but it will fail so long as readers are open on the files.",snapshotDir);
          WindowsFailedSnapshotTracker.handleFailedSnapshot(snapshotDir);
        }
 else {
          throw e;
        }
      }
    }
  }
}
