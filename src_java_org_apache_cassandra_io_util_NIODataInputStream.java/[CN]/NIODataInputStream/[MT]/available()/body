{
  if (rbc instanceof SeekableByteChannel) {
    SeekableByteChannel sbc=(SeekableByteChannel)rbc;
    long remainder=Math.max(0,sbc.size() - sbc.position());
    return (remainder > Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int)(remainder + buf.remaining());
  }
  return buf.remaining();
}
