{
  assert(buf.remaining() < 8);
  int remaining;
  while ((remaining=buf.remaining()) < attempt) {
    int read=readNext();
    if (read == -1) {
      if (remaining < require) {
        buf.position(0);
        buf.limit(0);
        throw new EOFException();
      }
    }
  }
}
