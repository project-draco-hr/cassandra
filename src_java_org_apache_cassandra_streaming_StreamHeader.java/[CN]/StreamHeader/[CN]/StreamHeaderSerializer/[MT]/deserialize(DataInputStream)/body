{
  long sessionId=dis.readLong();
  PendingFile file=PendingFile.serializer().deserialize(dis);
  boolean initiatedTransfer=dis.readBoolean();
  int size=dis.readInt();
  StreamHeader header;
  if (size > 0) {
    List<PendingFile> pendingFiles=new ArrayList<PendingFile>(size);
    for (int i=0; i < size; i++) {
      pendingFiles.add(PendingFile.serializer().deserialize(dis));
    }
    header=new StreamHeader(sessionId,file,pendingFiles,initiatedTransfer);
  }
 else {
    header=new StreamHeader(sessionId,file,initiatedTransfer);
  }
  return header;
}
