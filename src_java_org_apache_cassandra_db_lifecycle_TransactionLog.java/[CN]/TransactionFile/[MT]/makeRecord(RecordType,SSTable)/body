{
  String relativePath=FileUtils.getRelativePath(parent.getFolder(),table.descriptor.baseFilename());
  if (type == RecordType.ADD) {
    return Record.makeNew(relativePath);
  }
 else   if (type == RecordType.REMOVE) {
    return Record.makeOld(parent.getFolder(),relativePath);
  }
 else {
    throw new AssertionError("Invalid record type " + type);
  }
}
