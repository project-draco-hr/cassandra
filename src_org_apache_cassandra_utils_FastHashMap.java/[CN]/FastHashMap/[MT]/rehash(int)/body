{
  int oldCapacity=set_.length;
  Object oldKeys[]=set_;
  V oldVals[]=values_;
  set_=new Object[newCapacity];
  Arrays.fill(set_,FREE);
  values_=(V[])new Object[newCapacity];
  for (int i=oldCapacity; i-- > 0; ) {
    if (oldKeys[i] != FREE && oldKeys[i] != REMOVED) {
      Object o=oldKeys[i];
      int index=insertionIndex((K)o);
      if (index < 0) {
        throwObjectContractViolation(set_[(-index - 1)],o);
      }
      set_[index]=o;
      values_[index]=oldVals[i];
    }
  }
}
