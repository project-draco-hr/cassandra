{
  Map<BigInteger,EndPoint> tokenToEndPointMap=tkMetadata.cloneTokenEndPointMap();
  Set<BigInteger> tokens=tokenToEndPointMap.keySet();
  dos.writeInt(tokens.size());
  for (  BigInteger token : tokens) {
    byte[] bytes=token.toByteArray();
    dos.writeInt(bytes.length);
    dos.write(bytes);
    CompactEndPointSerializationHelper.serialize(tokenToEndPointMap.get(token),dos);
  }
}
