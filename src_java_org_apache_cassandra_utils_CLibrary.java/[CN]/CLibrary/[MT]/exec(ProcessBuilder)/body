{
  Process p=pb.start();
  try {
    int errCode=p.waitFor();
    if (errCode != 0) {
      BufferedReader in=new BufferedReader(new InputStreamReader(p.getInputStream()));
      BufferedReader err=new BufferedReader(new InputStreamReader(p.getErrorStream()));
      StringBuffer buff=new StringBuffer();
      String str;
      while ((str=in.readLine()) != null)       buff.append(str).append(System.getProperty("line.separator"));
      while ((str=err.readLine()) != null)       buff.append(str).append(System.getProperty("line.separator"));
      throw new IOException("Exception while executing the command: " + StringUtils.join(pb.command()," ") + ", command error Code: "+ errCode+ ", command output: "+ buff.toString());
    }
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
}
