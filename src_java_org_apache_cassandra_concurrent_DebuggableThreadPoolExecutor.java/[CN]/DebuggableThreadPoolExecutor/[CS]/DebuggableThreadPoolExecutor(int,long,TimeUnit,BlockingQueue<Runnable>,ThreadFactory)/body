{
  super(corePoolSize,corePoolSize,keepAliveTime,unit,workQueue,threadFactory);
  allowCoreThreadTimeOut(true);
  this.setRejectedExecutionHandler(new RejectedExecutionHandler(){
    public void rejectedExecution(    Runnable task,    ThreadPoolExecutor executor){
      BlockingQueue<Runnable> queue=executor.getQueue();
      while (true) {
        if (executor.isShutdown())         throw new RejectedExecutionException("ThreadPoolExecutor has shut down");
        try {
          if (queue.offer(task,1000,TimeUnit.MILLISECONDS))           break;
        }
 catch (        InterruptedException e) {
          throw new AssertionError(e);
        }
      }
    }
  }
);
}
