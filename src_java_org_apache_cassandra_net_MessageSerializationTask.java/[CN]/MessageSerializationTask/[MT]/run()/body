{
  DebuggableThreadPoolExecutor es=(DebuggableThreadPoolExecutor)MessagingService.getWriteExecutor();
  logger_.debug("Message Serialization Task: " + (es.getTaskCount() - es.getCompletedTaskCount()));
  Context ctx=new Context();
  ctx.put(this.getClass().getName(),message_);
  ThreadLocalContext.put(ctx);
  TcpConnection connection=null;
  try {
    Message message=SinkManager.processClientMessageSink(message_);
    if (null == message)     return;
    connection=MessagingService.getConnection(message_.getFrom(),to_);
    connection.write(message);
  }
 catch (  SocketException se) {
    MessagingService.getConnectionPool(message_.getFrom(),to_).shutdown();
    logger_.warn(LogUtil.throwableToString(se));
  }
catch (  IOException e) {
    logConnectAndIOException(e,connection);
  }
catch (  Throwable th) {
    logger_.warn(LogUtil.throwableToString(th));
  }
 finally {
    if (connection != null) {
      connection.close();
    }
  }
}
