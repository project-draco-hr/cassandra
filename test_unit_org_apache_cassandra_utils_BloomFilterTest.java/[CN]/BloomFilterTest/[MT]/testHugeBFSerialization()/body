{
  ByteBuffer test=ByteBuffer.wrap(new byte[]{0,1});
  File file=FileUtils.createTempFile("bloomFilterTest-",".dat");
  BloomFilter filter=(BloomFilter)FilterFactory.getFilter(((long)Integer.MAX_VALUE / 8) + 1,0.01d,true);
  filter.add(test);
  DataOutputStream out=new DataOutputStream(new FileOutputStream(file));
  FilterFactory.serialize(filter,out);
  filter.bitset.serialize(out);
  out.close();
  DataInputStream in=new DataInputStream(new FileInputStream(file));
  BloomFilter filter2=(BloomFilter)FilterFactory.deserialize(in,Type.MURMUR3,true);
  Assert.assertTrue(filter2.isPresent(test));
  FileUtils.closeQuietly(in);
}
