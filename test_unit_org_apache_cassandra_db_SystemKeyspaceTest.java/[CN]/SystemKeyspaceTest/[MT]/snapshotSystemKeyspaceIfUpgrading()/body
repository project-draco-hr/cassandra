{
  for (  ColumnFamilyStore cfs : Keyspace.open(SystemKeyspace.NAME).getColumnFamilyStores())   cfs.clearUnsafe();
  Keyspace.clearSnapshot(null,SystemKeyspace.NAME);
  SystemKeyspace.snapshotOnVersionChange();
  assertTrue(getSystemSnapshotFiles().isEmpty());
  setupReleaseVersion(getOlderVersionString());
  Keyspace.clearSnapshot(null,SystemKeyspace.NAME);
  assertTrue(getSystemSnapshotFiles().isEmpty());
  SystemKeyspace.snapshotOnVersionChange();
  assertEquals(SystemKeyspace.metadata().tables.size(),getSystemSnapshotFiles().size());
  Keyspace.clearSnapshot(null,SystemKeyspace.NAME);
  setupReleaseVersion(FBUtilities.getReleaseVersionString());
  SystemKeyspace.snapshotOnVersionChange();
  assertTrue(getSystemSnapshotFiles().isEmpty());
}
