{
  if (isAborted.compareAndSet(false,true)) {
    state(finalState);
    if (finalState == State.FAILED) {
      for (      StreamTask task : Iterables.concat(receivers.values(),transfers.values()))       task.abort();
    }
    handler.close();
    streamResult.handleSessionComplete(this);
  }
}
