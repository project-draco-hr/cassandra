{
  int[] buffer=new int[2];
  while (b - a > 7) {
    if (maxDepth == 0) {
      heapSort(data,a,b);
      return;
    }
    maxDepth--;
    doPivot(data,a,b,buffer);
    int mlo=buffer[0];
    int mhi=buffer[1];
    if (mlo - a < b - mhi) {
      quickSort(data,a,mlo,maxDepth);
      a=mhi;
    }
 else {
      quickSort(data,mhi,b,maxDepth);
      b=mlo;
    }
  }
  if (b - a > 1)   insertionSort(data,a,b);
}
