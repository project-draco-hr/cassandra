{
  if (buffer.hasArray()) {
    System.arraycopy(buffer.array(),buffer.arrayOffset() + position,bytes,offset,length);
  }
 else {
    for (int i=0; i < length; i++) {
      bytes[offset++]=buffer.get(position++);
    }
  }
}
