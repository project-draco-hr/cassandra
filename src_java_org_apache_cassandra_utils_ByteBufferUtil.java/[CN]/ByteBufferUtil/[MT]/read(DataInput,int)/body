{
  ByteBuffer array;
  if (in instanceof FileDataInput) {
    array=((FileDataInput)in).readBytes(length);
  }
 else {
    byte[] buff=new byte[length];
    in.readFully(buff);
    array=ByteBuffer.wrap(buff);
  }
  return array;
}
