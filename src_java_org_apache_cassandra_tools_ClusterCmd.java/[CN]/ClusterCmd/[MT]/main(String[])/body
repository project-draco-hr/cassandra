{
  ClusterCmd clusterCmd=null;
  try {
    clusterCmd=new ClusterCmd(args);
  }
 catch (  ParseException pe) {
    System.err.println(pe.getMessage());
    ClusterCmd.printUsage();
    System.exit(1);
  }
catch (  IOException ioe) {
    System.err.println("Error connecting to remote JMX agent!");
    ioe.printStackTrace();
    System.exit(3);
  }
  if (clusterCmd.getArgs().length < 1) {
    System.err.println("Missing argument for command.");
    ClusterCmd.printUsage();
    System.exit(1);
  }
  String[] arguments=clusterCmd.getArgs();
  String cmdName=arguments[0];
  if (cmdName.equals("get_endpoints")) {
    if (arguments.length <= 1) {
      System.err.println("missing key argument");
    }
    clusterCmd.printEndPoints(arguments[1]);
  }
 else   if (cmdName.equals("global_snapshot")) {
    String snapshotName="";
    if (arguments.length > 1) {
      snapshotName=arguments[1];
    }
    clusterCmd.takeGlobalSnapshot(snapshotName);
  }
 else   if (cmdName.equals("clear_global_snapshot")) {
    clusterCmd.clearGlobalSnapshot();
  }
 else {
    System.err.println("Unrecognized command: " + cmdName + ".");
    ClusterCmd.printUsage();
    System.exit(1);
  }
  System.exit(0);
}
