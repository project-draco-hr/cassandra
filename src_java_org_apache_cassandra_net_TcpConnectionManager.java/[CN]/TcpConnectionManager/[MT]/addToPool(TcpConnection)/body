{
  lock_.lock();
  try {
    if (contains(connection))     return;
    if (allConnections_.size() < maxSize_) {
      allConnections_.add(connection);
    }
 else {
      connection.closeSocket();
    }
  }
  finally {
    lock_.unlock();
  }
}
