{
  Iterator<SelectionKey> it;
synchronized (modifyKeysForWrite_) {
    it=new ArrayList<SelectionKey>(modifyKeysForWrite_).iterator();
    modifyKeysForWrite_.clear();
  }
  while (it.hasNext()) {
    SelectionKey key=it.next();
    if (key.isValid() && (key.attachment() != null)) {
      ((SelectionKeyHandler)key.attachment()).modifyKeyForWrite(key);
    }
  }
}
