{
  try {
    logger.info("Loading settings from {}",url);
    byte[] configBytes;
    try (InputStream is=url.openStream()){
      configBytes=ByteStreams.toByteArray(is);
    }
 catch (    IOException e) {
      throw new AssertionError(e);
    }
    logConfig(configBytes);
    Constructor constructor=new CustomConstructor(Config.class);
    MissingPropertiesChecker propertiesChecker=new MissingPropertiesChecker();
    constructor.setPropertyUtils(propertiesChecker);
    Yaml yaml=new Yaml(constructor);
    Config result=yaml.loadAs(new ByteArrayInputStream(configBytes),Config.class);
    propertiesChecker.check();
    return result;
  }
 catch (  YAMLException e) {
    throw new ConfigurationException("Invalid yaml: " + url,e);
  }
}
