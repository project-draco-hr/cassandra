{
  try {
    URL url=getStorageConfigURL();
    logger.info("Loading settings from {}",url);
    byte[] configBytes;
    try (InputStream is=url.openStream()){
      configBytes=ByteStreams.toByteArray(is);
    }
 catch (    IOException e) {
      throw new AssertionError(e);
    }
    logConfig(configBytes);
    org.yaml.snakeyaml.constructor.Constructor constructor=new org.yaml.snakeyaml.constructor.Constructor(Config.class);
    TypeDescription seedDesc=new TypeDescription(SeedProviderDef.class);
    seedDesc.putMapPropertyType("parameters",String.class,String.class);
    constructor.addTypeDescription(seedDesc);
    MissingPropertiesChecker propertiesChecker=new MissingPropertiesChecker();
    constructor.setPropertyUtils(propertiesChecker);
    Yaml yaml=new Yaml(constructor);
    Config result=yaml.loadAs(new ByteArrayInputStream(configBytes),Config.class);
    propertiesChecker.check();
    return result;
  }
 catch (  YAMLException e) {
    throw new ConfigurationException("Invalid yaml",e);
  }
}
