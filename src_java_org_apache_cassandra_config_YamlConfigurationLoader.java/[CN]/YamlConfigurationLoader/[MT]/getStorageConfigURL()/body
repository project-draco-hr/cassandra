{
  String configUrl=System.getProperty("cassandra.config");
  if (configUrl == null) {
    configUrl=DEFAULT_CONFIGURATION;
  }
 else   if (!FBUtilities.isUnix() && !configUrl.startsWith(FILE_PREFIX)) {
    String format="Non-unix environment detected, %s prefix not supplied at the beginning of file path but is required. Changing path to %s";
    configUrl=FILE_PREFIX + configUrl;
    logger.warn(String.format(format,FILE_PREFIX,configUrl));
  }
  URL url;
  try {
    url=new URL(configUrl);
    url.openStream().close();
  }
 catch (  Exception e) {
    ClassLoader loader=DatabaseDescriptor.class.getClassLoader();
    url=loader.getResource(configUrl);
    if (url == null)     throw new ConfigurationException("Cannot locate " + configUrl);
  }
  return url;
}
