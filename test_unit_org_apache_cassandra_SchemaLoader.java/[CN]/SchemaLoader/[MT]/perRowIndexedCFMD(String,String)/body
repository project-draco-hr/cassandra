{
  final Map<String,String> indexOptions=Collections.singletonMap(SecondaryIndex.CUSTOM_INDEX_OPTION_NAME,PerRowSecondaryIndexTest.TestIndex.class.getName());
  CFMetaData cfm=CFMetaData.Builder.create(ksName,cfName).addPartitionKey("key",AsciiType.instance).build();
  ColumnDefinition indexedColumn=ColumnDefinition.regularDef(ksName,cfName,"indexed",AsciiType.instance);
  cfm.addOrReplaceColumnDefinition(indexedColumn);
  cfm.indexes(cfm.getIndexes().with(IndexMetadata.legacyIndex(indexedColumn,"indexe1",IndexMetadata.IndexType.CUSTOM,indexOptions)));
  return cfm;
}
