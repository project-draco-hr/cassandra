{
  this.comparator=comparator;
  this.term=term;
  this.tokens=new TreeMap<>();
  @SuppressWarnings("resource") RangeIterator<Long,Token> tokens=term.getTokens();
  while (tokens.hasNext()) {
    Token current=tokens.next();
    LongSet offsets=this.tokens.get(current.get());
    if (offsets == null)     this.tokens.put(current.get(),(offsets=new LongOpenHashSet()));
    for (    Long offset : ((TokenTree.OnDiskToken)current).getOffsets())     offsets.add(offset);
  }
}
