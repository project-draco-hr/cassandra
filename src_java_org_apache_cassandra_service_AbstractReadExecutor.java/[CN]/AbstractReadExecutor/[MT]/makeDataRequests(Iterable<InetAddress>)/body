{
  boolean readLocal=false;
  for (  InetAddress endpoint : endpoints) {
    if (isLocalRequest(endpoint)) {
      readLocal=true;
    }
 else {
      logger.trace("reading data from {}",endpoint);
      MessagingService.instance().sendRRWithFailure(command.createMessage(),endpoint,handler);
    }
  }
  if (readLocal) {
    logger.trace("reading data locally");
    StageManager.getStage(Stage.READ).maybeExecuteImmediately(new LocalReadRunnable(command,handler));
  }
}
