{
  ReadCommand digestCommand=command.copy();
  digestCommand.setDigestQuery(true);
  MessageOut<?> message=digestCommand.createMessage();
  for (  InetAddress endpoint : endpoints) {
    if (isLocalRequest(endpoint)) {
      logger.trace("reading digest locally");
      StageManager.getStage(Stage.READ).execute(new LocalReadRunnable(digestCommand,handler));
    }
 else {
      logger.trace("reading digest from {}",endpoint);
      MessagingService.instance().sendRRWithFailure(message,endpoint,handler);
    }
  }
}
