{
  logger.debug("Closing and clearing existing commit log segments...");
  while (!segmentManagementTasks.isEmpty())   Thread.yield();
  for (  CommitLogSegment segment : activeSegments)   segment.close();
  activeSegments.clear();
  for (  CommitLogSegment segment : availableSegments)   segment.close();
  availableSegments.clear();
  allocatingFrom=null;
}
