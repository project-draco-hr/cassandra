{
  boolean archiveSuccess=commitLog.archiver.maybeWaitForArchiving(segment.getName());
  if (activeSegments.remove(segment)) {
    discardSegment(segment,archiveSuccess);
  }
 else {
    logger.warn("segment {} not found in activeSegments queue",segment);
  }
}
