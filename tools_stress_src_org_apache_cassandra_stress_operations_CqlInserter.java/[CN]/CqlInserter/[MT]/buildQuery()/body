{
  StringBuilder query=new StringBuilder("UPDATE ").append(wrapInQuotesIfRequired(state.type.table));
  if (state.isCql2())   query.append(" USING CONSISTENCY ").append(state.settings.command.consistencyLevel);
  query.append(" SET ");
  for (int i=0; i < state.settings.columns.maxColumnsPerKey; i++) {
    if (i > 0)     query.append(',');
    if (state.settings.columns.useTimeUUIDComparator) {
      if (state.isCql3())       throw new UnsupportedOperationException("Cannot use UUIDs in column names with CQL3");
      query.append(wrapInQuotesIfRequired(UUIDGen.getTimeUUID().toString())).append(" = ?");
    }
 else {
      query.append(wrapInQuotesIfRequired("C" + i)).append(" = ?");
    }
  }
  query.append(" WHERE KEY=?");
  return query.toString();
}
