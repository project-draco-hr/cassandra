{
  Map<Range,List<EndPoint>> replicasForExpandedRanges=new HashMap<Range,List<EndPoint>>();
  Set<Range> expandedRanges=expandedRangeToOldRangeMap.keySet();
  for (  Range expandedRange : expandedRanges) {
    replicasForExpandedRanges.put(expandedRange,newRangeToEndPointMap.get(expandedRange));
    newRangeToEndPointMap.remove(expandedRange);
  }
  for (  Range expandedRange : expandedRanges) {
    List<Range> subRanges=expandedRangeToOldRangeMap.get(expandedRange);
    List<EndPoint> replicas=replicasForExpandedRanges.get(expandedRange);
    for (    Range subRange : subRanges) {
      newRangeToEndPointMap.put(subRange,new ArrayList<EndPoint>(replicas));
    }
  }
}
