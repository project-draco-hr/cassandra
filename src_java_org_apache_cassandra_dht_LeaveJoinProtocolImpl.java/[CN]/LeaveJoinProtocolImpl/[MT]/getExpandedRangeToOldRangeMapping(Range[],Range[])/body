{
  Map<Range,List<Range>> map=new HashMap<Range,List<Range>>();
  List<Range> oRanges=new ArrayList<Range>();
  Collections.addAll(oRanges,oldRanges);
  List<Range> nRanges=new ArrayList<Range>();
  Collections.addAll(nRanges,newRanges);
  for (  Range oRange : oldRanges) {
    boolean bVal=nRanges.remove(oRange);
    if (bVal)     oRanges.remove(oRange);
  }
  int nSize=nRanges.size();
  int oSize=oRanges.size();
  for (int i=0; i < nSize; ++i) {
    Range nRange=nRanges.get(i);
    for (int j=0; j < oSize; ++j) {
      Range oRange=oRanges.get(j);
      if (nRange.contains(oRange.right())) {
        List<Range> smallerRanges=map.get(nRange);
        if (smallerRanges == null) {
          smallerRanges=new ArrayList<Range>();
          map.put(nRange,smallerRanges);
        }
        smallerRanges.add(oRange);
        continue;
      }
    }
  }
  return map;
}
