{
  long offHeapMemUsedInBytes=0;
  Iterator<Map.Entry<String,ColumnFamilyStoreMBean>> cfamilies=probe.getColumnFamilyStoreMBeanProxies();
  while (cfamilies.hasNext()) {
    Entry<String,ColumnFamilyStoreMBean> entry=cfamilies.next();
    ColumnFamilyStoreMBean cfsProxy=entry.getValue();
    offHeapMemUsedInBytes+=cfsProxy.getBloomFilterOffHeapMemoryUsed();
    offHeapMemUsedInBytes+=cfsProxy.getIndexSummaryOffHeapMemoryUsed();
    offHeapMemUsedInBytes+=cfsProxy.getCompressionMetadataOffHeapMemoryUsed();
  }
  return offHeapMemUsedInBytes / (1024d * 1024);
}
