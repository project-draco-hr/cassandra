{
  ByteBuffer input=bytes.duplicate();
  int n=input.getShort();
  Map<K,V> m=new LinkedHashMap<K,V>(n);
  for (int i=0; i < n; i++) {
    int sk=input.getShort();
    byte[] datak=new byte[sk];
    input.get(datak);
    int sv=input.getShort();
    byte[] datav=new byte[sv];
    input.get(datav);
    m.put(keys.compose(ByteBuffer.wrap(datak)),values.compose(ByteBuffer.wrap(datav)));
  }
  return m;
}
