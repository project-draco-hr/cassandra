{
  long j;
  while (true) {
    if ((j=atomic.getAndSet(i)) <= i)     break;
    i=j;
  }
}
