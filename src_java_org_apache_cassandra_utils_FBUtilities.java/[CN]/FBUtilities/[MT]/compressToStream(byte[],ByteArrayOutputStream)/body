{
  Deflater compressor=new Deflater();
  compressor.setLevel(Deflater.BEST_COMPRESSION);
  compressor.setInput(input);
  compressor.finish();
  byte[] buf=new byte[1024];
  while (!compressor.finished()) {
    int count=compressor.deflate(buf);
    bos.write(buf,0,count);
  }
}
