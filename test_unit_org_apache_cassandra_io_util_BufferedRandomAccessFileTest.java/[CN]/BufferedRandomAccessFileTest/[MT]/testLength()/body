{
  File tmpFile=File.createTempFile("lengthtest","bin");
  BufferedRandomAccessFile rw=new BufferedRandomAccessFile(tmpFile,"rw");
  assertEquals(0,rw.length());
  byte[] lessThenBuffer=new byte[BufferedRandomAccessFile.BuffSz_ / 2];
  rw.write(lessThenBuffer);
  assertEquals(lessThenBuffer.length,rw.length());
  rw.sync();
  assertEquals(lessThenBuffer.length,rw.length());
  byte[] biggerThenBuffer=new byte[BufferedRandomAccessFile.BuffSz_ * 2];
  rw.write(biggerThenBuffer);
  assertEquals(biggerThenBuffer.length + lessThenBuffer.length,rw.length());
  rw.seek(0);
  rw.read();
  assertEquals(biggerThenBuffer.length + lessThenBuffer.length,rw.length());
  rw.close();
  BufferedRandomAccessFile r=new BufferedRandomAccessFile(tmpFile,"r");
  assertEquals(lessThenBuffer.length + biggerThenBuffer.length,r.length());
  r.close();
}
