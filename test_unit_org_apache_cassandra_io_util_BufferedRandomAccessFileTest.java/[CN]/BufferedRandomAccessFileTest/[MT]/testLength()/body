{
  File tmpFile=File.createTempFile("lengthtest","bin");
  SequentialWriter w=SequentialWriter.open(tmpFile);
  assertEquals(0,w.length());
  byte[] lessThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE / 2);
  w.write(lessThenBuffer);
  assertEquals(lessThenBuffer.length,w.length());
  w.sync();
  assertEquals(lessThenBuffer.length,w.length());
  byte[] biggerThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE * 2);
  w.write(biggerThenBuffer);
  assertEquals(biggerThenBuffer.length + lessThenBuffer.length,w.length());
  w.finish();
  try (ChannelProxy channel=new ChannelProxy(tmpFile);RandomAccessReader r=RandomAccessReader.open(channel)){
    assertEquals(lessThenBuffer.length + biggerThenBuffer.length,r.length());
  }
 }
