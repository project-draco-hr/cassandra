{
  File tmpFile=File.createTempFile("lengthtest","bin");
  SequentialWriter w=SequentialWriter.open(tmpFile);
  assertEquals(0,w.length());
  byte[] lessThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE / 2);
  w.write(lessThenBuffer);
  assertEquals(lessThenBuffer.length,w.length());
  w.sync();
  assertEquals(lessThenBuffer.length,w.length());
  byte[] biggerThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE * 2);
  w.write(biggerThenBuffer);
  assertEquals(biggerThenBuffer.length + lessThenBuffer.length,w.length());
  w.close();
  RandomAccessReader r=RandomAccessReader.open(tmpFile);
  assertEquals(lessThenBuffer.length + biggerThenBuffer.length,r.length());
  r.close();
}
