{
  try {
    ByteBuffer toAppend=bb.duplicate();
    toAppend.mark();
    FBUtilities.directCheckSum(incrementalChecksum,toAppend);
    toAppend.reset();
    int incrementalChecksumValue=(int)incrementalChecksum.getValue();
    incrementalOut.writeInt(incrementalChecksumValue);
    FBUtilities.directCheckSum(fullChecksum,toAppend);
    if (checksumIncrementalResult) {
      ByteBuffer byteBuffer=ByteBuffer.allocate(4);
      byteBuffer.putInt(incrementalChecksumValue);
      fullChecksum.update(byteBuffer.array(),0,byteBuffer.array().length);
    }
    incrementalChecksum.reset();
  }
 catch (  IOException e) {
    throw new IOError(e);
  }
}
