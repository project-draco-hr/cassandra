{
  try {
    ByteBuffer toAppend=bb.duplicate();
    toAppend.mark();
    FBUtilities.directCheckSum(incrementalChecksum,toAppend);
    toAppend.reset();
    incrementalOut.writeInt((int)incrementalChecksum.getValue());
    incrementalChecksum.reset();
    FBUtilities.directCheckSum(fullChecksum,toAppend);
  }
 catch (  IOException e) {
    throw new IOError(e);
  }
}
