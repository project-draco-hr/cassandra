{
  if (condition.isSignaled()) {
    return;
  }
  try {
    String dataCenter=DatabaseDescriptor.getEndPointSnitch().getLocation(message.getFrom());
    Object blockFor=responseCounts.get(dataCenter);
    if (blockFor != null) {
      Integer quorumCount=dcResponses.get(dataCenter);
      if (quorumCount == null) {
        dcResponses.put(dataCenter,1);
      }
 else       if ((Integer)blockFor > quorumCount) {
        dcResponses.put(dataCenter,quorumCount + 1);
      }
 else {
        responseCounts.remove(dataCenter);
      }
    }
  }
 catch (  UnknownHostException e) {
    throw new RuntimeException(e);
  }
  responses.add(message);
  if (responseCounts.isEmpty()) {
    condition.signal();
  }
}
