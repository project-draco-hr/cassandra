{
  String pidFile=System.getProperty("cassandra-pidfile");
  try {
    try {
      MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
      mbs.registerMBean(new StandardMBean(new NativeAccess(),NativeAccessMBean.class),new ObjectName(MBEAN_NAME));
    }
 catch (    Exception e) {
      logger.error("error registering MBean {}",MBEAN_NAME,e);
    }
    setup();
    if (pidFile != null) {
      new File(pidFile).deleteOnExit();
    }
    if (System.getProperty("cassandra-foreground") == null) {
      System.out.close();
      System.err.close();
    }
    start();
  }
 catch (  Throwable e) {
    logger.error("Exception encountered during startup",e);
    e.printStackTrace();
    System.out.println("Exception encountered during startup: " + e.getMessage());
    exitOrFail(3,"Exception encountered during startup",e);
  }
}
