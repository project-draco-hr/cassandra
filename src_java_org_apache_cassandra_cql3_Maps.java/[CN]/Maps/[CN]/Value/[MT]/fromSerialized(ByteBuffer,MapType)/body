{
  try {
    Map<?,?> m=(Map<?,?>)type.compose(value);
    Map<ByteBuffer,ByteBuffer> map=new LinkedHashMap<ByteBuffer,ByteBuffer>(m.size());
    for (    Map.Entry<?,?> entry : m.entrySet())     map.put(type.keys.decompose(entry.getKey()),type.values.decompose(entry.getValue()));
    return new Value(map);
  }
 catch (  MarshalException e) {
    throw new InvalidRequestException(e.getMessage());
  }
}
