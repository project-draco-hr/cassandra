{
  super(UUIDGen.makeType1UUIDFromHost(FBUtilities.getLocalAddress()),DatabaseDescriptor.getDefsVersion());
  this.cfm=cfm;
  KSMetaData ksm=DatabaseDescriptor.getTableDefinition(cfm.tableName);
  if (ksm == null)   throw new ConfigurationException("Keyspace does not already exist.");
 else   if (ksm.cfMetaData().containsKey(cfm.cfName))   throw new ConfigurationException("CF is already defined in that keyspace.");
 else   if (!Migration.isLegalName(cfm.cfName))   throw new ConfigurationException("Invalid column family name: " + cfm.cfName);
  KSMetaData newKsm=makeNewKeyspaceDefinition(ksm);
  rm=Migration.makeDefinitionMutation(newKsm,null,newVersion);
}
