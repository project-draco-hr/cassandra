{
  KSMetaData ksm=DatabaseDescriptor.getTableDefinition(cfm.ksName);
  ksm=makeNewKeyspaceDefinition(ksm);
  try {
    CFMetaData.map(cfm);
  }
 catch (  ConfigurationException ex) {
    throw new IOException(ex);
  }
  Table.open(cfm.ksName);
  DatabaseDescriptor.setTableDefinition(ksm,newVersion);
  CFMetaData.fixMaxId();
  if (!clientMode)   Table.open(ksm.name).initCf(cfm.cfId,cfm.cfName);
}
