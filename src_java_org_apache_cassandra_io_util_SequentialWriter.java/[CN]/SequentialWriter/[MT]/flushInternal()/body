{
  if (isDirty) {
    flushData();
    if (trickleFsync) {
      bytesSinceTrickleFsync+=validBufferBytes;
      if (bytesSinceTrickleFsync >= trickleFsyncByteInterval) {
        syncDataOnlyInternal();
        bytesSinceTrickleFsync=0;
      }
    }
    if (skipIOCache) {
      bytesSinceCacheFlush+=validBufferBytes;
      if (bytesSinceCacheFlush >= RandomAccessReader.CACHE_FLUSH_INTERVAL_IN_BYTES) {
        CLibrary.trySkipCache(this.fd,ioCacheStartOffset,0);
        ioCacheStartOffset=bufferOffset;
        bytesSinceCacheFlush=0;
      }
    }
    resetBuffer();
    isDirty=false;
  }
}
