{
  if (current != 0)   throw new IllegalStateException();
  metadata=writer;
  metadata.writeChunkSize(buffer.length);
}
