{
  if (syncNeeded) {
    flushInternal();
    syncDataOnlyInternal();
    if (!directorySynced) {
      SyncUtil.trySync(directoryFD);
      directorySynced=true;
    }
    syncNeeded=false;
  }
}
